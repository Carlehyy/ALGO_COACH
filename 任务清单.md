# ACM算法学习平台 - 任务清单 (TODO List) V3

> **项目代号**: acm-learning-platform  
> **生成日期**: 2026年1月  
> **后端技术**: Python 3.11+ / FastAPI  
> **预计周期**: 10-12周  
> **参考文档**: PRD-V4.md、项目开发指南-V3.md

---

## 📊 任务清单总览

| 阶段 | 任务数 | 预计周期 | 核心交付物 |
|------|--------|----------|------------|
| **Phase 0** 项目准备 | 12 | 0.5周 | 环境、Git、目录结构 |
| **Phase 1** 基础架构 | 28 | 2周 | 后端骨架、前端骨架、用户系统 |
| **Phase 2** 核心功能 | 38 | 4周 | 知识点、笔记、积分、AI教练 |
| **Phase 3** 管理后台 | 22 | 2周 | 资源管理、PDF校对、笔记生成 |
| **Phase 4** 收尾发布 | 15 | 1.5周 | 宣传页、文档、测试、部署 |
| **总计** | **115** | **10周** | |

---

## 🔖 任务状态图例

```
⬜ 待开始  |  🔄 进行中  |  ✅ 已完成  |  ❌ 已取消  |  ⚠️ 必须完成
```

---

# Phase 0: 项目准备（Week 0）

## 0.1 开发环境搭建

```
0.1.1 [安装Python 3.11+]
- 描述：安装Python 3.11或更高版本，确保pip正常工作
- 参考：开发指南V3 - 3.1 环境要求
- 命令：python3 --version && pip --version
- 验收：Python版本 >= 3.11
- 状态：⬜

0.1.2 [安装Node.js 18+]
- 描述：安装Node.js用于前端uipro开发
- 参考：开发指南V3 - 3.1 环境要求
- 命令：node --version && npm --version
- 验收：Node.js版本 >= 18
- 状态：⬜

0.1.3 [安装Docker和Docker Compose]
- 描述：安装Docker 24+和Docker Compose 2.20+
- 参考：开发指南V3 - 3.1 环境要求
- 命令：docker --version && docker-compose --version
- 验收：Docker正常运行
- 状态：⬜

0.1.4 [安装Git]
- 描述：安装Git 2.40+版本控制工具
- 命令：git --version
- 验收：Git版本 >= 2.40
- 状态：⬜

0.1.5 [安装uipro CLI]
- 描述：全局安装uipro命令行工具
- 命令：npm install -g @aspect/uipro-cli && uipro --version
- 参考：开发指南V3 - 7.2 初始化项目
- 验收：uipro命令可用
- 状态：⬜

0.1.6 [创建Docker网络]
- 描述：创建项目专用Docker网络
- 命令：docker network create acm-network
- 验收：网络创建成功
- 状态：⬜
```

## 0.2 基础服务启动

```
0.2.1 [创建docker-compose.dev.yml]
- 描述：编写开发环境Docker Compose配置文件
- 文件：docker/docker-compose.dev.yml
- 参考：开发指南V3 - 3.4 Docker Compose配置
- 包含服务：MySQL 8.0、MongoDB 6.0、Redis 7、MinIO、ChromaDB
- 状态：⬜

0.2.2 [启动Docker基础服务]
- 描述：启动所有数据库和存储服务
- 命令：docker-compose -f docker/docker-compose.dev.yml up -d
- 验收：
  - MySQL: localhost:3306 可连接
  - MongoDB: localhost:27017 可连接
  - Redis: localhost:6379 可连接
  - MinIO: localhost:9000/9001 可访问
- 依赖：0.2.1
- 状态：⬜
```

## 0.3 Git仓库初始化

```
0.3.1 [初始化Git仓库]
- 描述：创建Git仓库，配置远程仓库
- 命令：
  git init
  git remote add origin <repository-url>
- 参考：开发指南V3 - 5.1 分支策略
- 状态：⬜

0.3.2 [创建.gitignore文件]
- 描述：配置Git忽略规则
- 文件：.gitignore
- 参考：开发指南V3 - 5.5 .gitignore配置
- 包含：Python缓存、虚拟环境、.env、日志、node_modules等
- 状态：⬜

0.3.3 [创建dev分支]
- 描述：创建开发分支，设置为默认工作分支
- 命令：
  git checkout -b dev
  git push -u origin dev
- 参考：开发指南V3 - 5.1 分支策略
- 注意：后续所有开发在dev分支进行
- 状态：⬜

0.3.4 [配置提交信息规范]
- 描述：创建提交信息模板或配置commitlint
- 参考：开发指南V3 - 5.3 提交信息规范
- 格式：<type>(<scope>): <subject>
- 状态：⬜
```

## 0.4 项目目录创建

```
0.4.1 [创建完整项目目录结构]
- 描述：按照开发指南创建所有目录
- 参考：开发指南V3 - 4. 项目目录结构
- 结构：
  acm-learning-platform/
  ├── docs/                 # 项目文档
  ├── backend/              # Python后端
  │   ├── app/
  │   │   ├── api/v1/       # API层
  │   │   ├── core/         # 核心模块
  │   │   ├── models/       # 数据模型
  │   │   ├── services/     # 业务逻辑
  │   │   ├── repositories/ # 数据访问
  │   │   ├── infrastructure/# 基础设施
  │   │   ├── tasks/        # Celery任务
  │   │   └── prompts/      # AI Prompt
  │   ├── tests/            # 单元测试
  │   ├── scripts/          # 脚本工具
  │   ├── alembic/          # 数据库迁移
  │   └── logs/             # 日志目录
  ├── frontend/             # 前端应用
  ├── landing-page/         # 宣传页面
  ├── docker/               # Docker配置
  ├── scripts/              # 项目脚本
  └── knowledge-skeleton/   # 知识图谱骨架
- 状态：⬜

0.4.2 [放置需求文档]
- 描述：将PRD-V4.md放入docs/目录
- 文件：docs/PRD-V4.md
- 状态：⬜
```

---

# Phase 1: 基础架构（Week 1-2）

## 1.1 Python后端项目初始化（Week 1）

```
1.1.1 [创建Python虚拟环境]
- 描述：在backend目录创建Python虚拟环境
- 命令：
  cd backend
  python3.11 -m venv venv
  source venv/bin/activate  # Windows: venv\Scripts\activate
- 验收：虚拟环境激活成功
- 状态：⬜

1.1.2 [创建requirements.txt]
- 描述：编写Python生产依赖列表
- 文件：backend/requirements.txt
- 参考：开发指南V3 - 6.1 依赖管理
- 核心依赖：
  - fastapi==0.109.2
  - uvicorn[standard]==0.27.1
  - pydantic==2.6.1
  - sqlalchemy==2.0.25
  - aiomysql==0.2.0
  - motor==3.3.2
  - beanie==1.25.0
  - redis==5.0.1
  - python-jose[cryptography]==3.3.0
  - passlib[bcrypt]==1.7.4
  - anthropic==0.18.1
  - loguru==0.7.2
  - celery==5.3.6
  - minio==7.2.3
- 状态：⬜

1.1.3 [创建requirements-dev.txt]
- 描述：编写Python开发依赖列表
- 文件：backend/requirements-dev.txt
- 内容：pytest、pytest-asyncio、pytest-cov、black、flake8、mypy
- 状态：⬜

1.1.4 [安装Python依赖]
- 描述：安装所有Python依赖包
- 命令：
  pip install --upgrade pip
  pip install -r requirements.txt
  pip install -r requirements-dev.txt
- 依赖：1.1.1, 1.1.2, 1.1.3
- 验收：所有包安装成功
- 状态：⬜

1.1.5 [创建环境变量配置]
- 描述：创建.env.example和实际.env文件
- 文件：
  - backend/.env.example
  - backend/.env（从example复制并填入实际值）
- 参考：开发指南V3 - 3.3 环境变量配置详解
- 内容：MySQL/MongoDB/Redis/MinIO/Claude API等配置
- 状态：⬜

1.1.6 [创建Pydantic Settings配置]
- 描述：实现配置管理类，从环境变量读取配置
- 文件：backend/app/config.py
- 参考：开发指南V3 - 6.2 项目配置
- 功能：
  - 应用配置（APP_NAME, APP_ENV, APP_DEBUG）
  - MySQL连接URL生成
  - MongoDB连接URL生成
  - Redis连接URL生成
  - JWT配置
- 验收：from app.config import settings 正常工作
- 状态：⬜

1.1.7 [创建FastAPI应用入口]
- 描述：创建FastAPI应用主文件
- 文件：backend/app/main.py
- 参考：开发指南V3 - 6.3 FastAPI应用入口
- 功能：
  - 应用生命周期管理（lifespan）
  - CORS中间件配置
  - 路由注册
  - 健康检查端点 /health
- 验收：uvicorn app.main:app --reload 成功启动
- 状态：⬜

1.1.8 [实现统一响应格式]
- 描述：创建Response类实现统一响应格式
- 文件：backend/app/core/response.py
- 参考：开发指南V3 - 6.4 统一响应格式
- 类：
  - Response[T]: 通用响应 {code, message, data, timestamp}
  - PageData[T]: 分页数据
  - PageResponse: 分页响应
- 状态：⬜

1.1.9 [实现全局异常处理]
- 描述：创建异常类和全局异常处理器
- 文件：backend/app/core/exceptions.py
- 参考：开发指南V3 - 6.5 异常处理
- 内容：
  - BusinessException: 业务异常基类
  - ErrorCode: 错误码定义（1xxxx通用、2xxxx用户、3xxxx笔记、4xxxx积分、5xxxx AI）
  - setup_exception_handlers(): 注册全局异常处理器
- 状态：⬜

1.1.10 [配置日志系统]
- 描述：使用Loguru配置日志系统
- 文件：backend/app/core/logging.py
- 参考：开发指南V3 - 10.1 日志配置
- 功能：
  - 控制台彩色输出
  - app.log: 应用日志
  - error.log: 错误日志（含堆栈）
  - 日志轮转和压缩
- 验收：logger.info/error 正常输出
- 状态：⬜

1.1.11 [实现JWT认证模块]
- 描述：实现JWT生成、验证、密码哈希功能
- 文件：backend/app/core/security.py
- 参考：开发指南V3 - 6.6 JWT认证
- 功能：
  - get_password_hash(): 密码哈希
  - verify_password(): 密码验证
  - create_access_token(): 创建访问令牌
  - create_refresh_token(): 创建刷新令牌
  - verify_token(): 验证令牌
- 状态：⬜

1.1.12 [配置MySQL异步连接]
- 描述：使用SQLAlchemy 2.0配置MySQL异步连接池
- 文件：backend/app/infrastructure/database/mysql.py
- 参考：开发指南V3 - 6.7 数据库连接
- 功能：
  - Base: SQLAlchemy基类
  - engine: 异步引擎
  - async_session_factory: 异步会话工厂
  - init_mysql(): 初始化连接
  - close_mysql(): 关闭连接
  - get_mysql_session(): 依赖注入用
- 验收：能成功连接MySQL并执行查询
- 状态：⬜

1.1.13 [配置MongoDB异步连接]
- 描述：使用Motor/Beanie配置MongoDB连接
- 文件：backend/app/infrastructure/database/mongo.py
- 参考：开发指南V3 - 6.7 数据库连接
- 功能：
  - mongo_client: Motor客户端
  - init_mongo(): 初始化Beanie
  - close_mongo(): 关闭连接
- 验收：能成功连接MongoDB
- 状态：⬜

1.1.14 [配置Redis客户端]
- 描述：配置Redis异步客户端
- 文件：backend/app/infrastructure/cache/redis.py
- 功能：
  - redis_client: Redis客户端
  - init_redis(): 初始化连接
  - close_redis(): 关闭连接
  - get_redis(): 获取客户端实例
- 验收：能成功连接Redis
- 状态：⬜

1.1.15 [配置MinIO客户端]
- 描述：配置MinIO对象存储客户端
- 文件：backend/app/infrastructure/storage/minio_client.py
- 功能：
  - MinIOClient类
  - upload_file(): 上传文件
  - download_file(): 下载文件
  - get_presigned_url(): 获取预签名URL
  - delete_file(): 删除文件
- 验收：能成功上传/下载文件
- 状态：⬜

1.1.16 [配置Alembic数据库迁移]
- 描述：初始化Alembic进行MySQL迁移管理
- 文件：
  - backend/alembic.ini
  - backend/alembic/env.py
- 命令：alembic init alembic
- 验收：alembic upgrade head 可执行
- 状态：⬜

1.1.17 [创建pytest测试配置]
- 描述：配置pytest和测试fixtures
- 文件：
  - backend/pytest.ini
  - backend/tests/conftest.py
- 参考：开发指南V3 - 9.2 pytest配置
- 内容：
  - asyncio_mode = auto
  - 测试数据库fixtures
  - Mock fixtures
- 验收：pytest tests/ 能正常运行
- 状态：⬜

1.1.18 [创建API路由汇总]
- 描述：创建API路由注册文件
- 文件：backend/app/api/v1/router.py
- 功能：汇总所有模块的路由
- 状态：⬜

1.1.19 [创建依赖注入模块]
- 描述：创建认证等依赖注入函数
- 文件：backend/app/api/deps.py
- 参考：开发指南V3 - 6.11 依赖注入
- 功能：
  - get_current_user(): 获取当前登录用户
  - get_current_admin(): 获取管理员用户
  - get_optional_user(): 可选用户
- 状态：⬜

1.1.20 [验证后端骨架]
- 描述：启动后端服务，验证所有基础模块正常工作
- 命令：uvicorn app.main:app --reload --port 8000
- 验证项：
  - ✅ 服务启动成功
  - ✅ /health 返回正常
  - ✅ /docs Swagger文档可访问
  - ✅ 数据库连接正常
- 依赖：1.1.1~1.1.19
- 状态：⬜

1.1.21 [提交后端骨架到Git]
- 描述：提交基础架构代码到dev分支
- 命令：
  git add .
  git commit -m "feat(backend): 完成Python后端基础架构

  - FastAPI应用入口
  - 配置管理(Pydantic Settings)
  - MySQL/MongoDB/Redis/MinIO连接
  - 统一响应格式
  - 全局异常处理
  - JWT认证模块
  - 日志系统(Loguru)
  - Alembic数据库迁移
  - pytest测试配置"
  git push origin dev
- 依赖：1.1.20
- 状态：⬜
```

## 1.2 前端项目初始化（Week 1）

```
1.2.1 [初始化uipro项目]
- 描述：使用uipro CLI初始化前端项目
- 命令：
  cd frontend
  uipro init --ai claude
- 参考：开发指南V3 - 7.2 初始化项目
- 验收：项目初始化成功
- 状态：⬜

1.2.2 [安装前端依赖]
- 描述：安装所有npm依赖
- 命令：npm install
- 依赖：1.2.1
- 验收：node_modules 生成
- 状态：⬜

1.2.3 [配置uipro主题]
- 描述：配置主题色、圆角、阴影等设计规范
- 文件：frontend/src/uipro.config.ts
- 参考：开发指南V3 - 7.3 uipro配置
- 内容：
  - 主色调: #6366f1 (Indigo)
  - 辅助色: #8b5cf6 (Violet)
  - 语义色: success/warning/error/info
  - 圆角和阴影配置
- 状态：⬜

1.2.4 [创建前端环境变量]
- 描述：创建前端环境变量配置
- 文件：
  - frontend/.env.example
  - frontend/.env.local
- 内容：VITE_API_BASE_URL=/api/v1
- 状态：⬜

1.2.5 [配置路由系统]
- 描述：配置Vue Router
- 文件：frontend/src/router/index.ts
- 参考：开发指南V3 - 4. 项目目录结构（frontend部分）
- 路由：
  - /: 首页
  - /user/login: 登录
  - /user/register: 注册
  - /user/profile: 个人中心
  - /note: 笔记列表
  - /note/:id: 笔记详情
  - /topic: 知识图谱
  - /coach: AI教练
  - /point: 积分中心
  - /admin/*: 管理后台
- 状态：⬜

1.2.6 [配置状态管理(Pinia)]
- 描述：配置Pinia状态管理
- 文件：frontend/src/stores/index.ts
- 状态：⬜

1.2.7 [封装API请求]
- 描述：使用Axios封装API请求，配置拦截器
- 文件：frontend/src/api/request.ts
- 参考：开发指南V3 - 7.6 API请求封装
- 功能：
  - 请求拦截器：添加Authorization头
  - 响应拦截器：处理业务错误码
  - 自动跳转登录
- 状态：⬜

1.2.8 [创建布局组件]
- 描述：创建通用布局组件
- 文件：
  - frontend/src/layouts/DefaultLayout.vue
  - frontend/src/layouts/AuthLayout.vue
  - frontend/src/layouts/AdminLayout.vue
  - frontend/src/components/common/AppHeader.vue
  - frontend/src/components/common/AppSidebar.vue
  - frontend/src/components/common/ThemeToggle.vue
- 状态：⬜

1.2.9 [验证前端项目]
- 描述：启动前端开发服务器验证
- 命令：npm run dev
- 验证项：
  - ✅ 服务启动成功
  - ✅ 浏览器自动打开
  - ✅ 首页正常显示
  - ✅ 深色/浅色切换正常
- 依赖：1.2.1~1.2.8
- 状态：⬜

1.2.10 [提交前端骨架到Git]
- 描述：提交前端基础架构到dev分支
- 命令：
  git add .
  git commit -m "feat(frontend): 完成uipro前端基础架构

  - uipro项目初始化
  - 主题配置
  - Vue Router路由
  - Pinia状态管理
  - Axios请求封装
  - 布局组件"
  git push origin dev
- 依赖：1.2.9
- 状态：⬜
```

## 1.3 用户系统开发（Week 2）

```
1.3.1 [创建User模型(MySQL)]
- 描述：创建用户表SQLAlchemy模型
- 文件：backend/app/models/mysql/user.py
- 参考：
  - 开发指南V3 - 6.8 MySQL模型示例
  - PRD V4 - 10.数据库设计 - t_user表
- 字段：
  - id: 主键
  - email: 邮箱(唯一)
  - hashed_password: 密码哈希
  - nickname: 昵称
  - avatar: 头像URL
  - points: 积分余额
  - total_recharged: 累计充值
  - total_consumed: 累计消费
  - leetcode_username: LeetCode用户名
  - ability_score: 能力评分
  - status: 状态(1正常 0禁用)
  - role: 角色(user/admin)
  - created_at/updated_at/last_login_at
- 状态：⬜

1.3.2 [创建用户Alembic迁移]
- 描述：生成用户表数据库迁移脚本
- 命令：
  alembic revision --autogenerate -m "create user table"
  alembic upgrade head
- 依赖：1.3.1
- 验收：t_user表在数据库中创建成功
- 状态：⬜

1.3.3 [创建用户Pydantic模式]
- 描述：创建用户相关的请求/响应模式
- 文件：backend/app/api/v1/schemas/user.py
- 类：
  - UserCreate: 注册请求
  - UserLogin: 登录请求
  - UserUpdate: 更新请求
  - UserResponse: 用户响应
  - TokenResponse: Token响应
- 状态：⬜

1.3.4 [创建UserRepository]
- 描述：实现用户数据访问层
- 文件：backend/app/repositories/mysql/user_repo.py
- 方法：
  - get_by_id()
  - get_by_email()
  - create()
  - update()
  - delete()
- 状态：⬜

1.3.5 [创建UserService]
- 描述：实现用户业务逻辑
- 文件：backend/app/services/user_service.py
- 参考：开发指南V3 - 6.9 Service层示例
- 方法：
  - create_user(): 用户注册
  - authenticate(): 用户认证
  - get_by_id(): 获取用户
  - get_by_email(): 根据邮箱获取
  - update_user(): 更新用户信息
- 依赖：1.3.1, 1.3.4
- 状态：⬜

1.3.6 [编写UserService单元测试] ⚠️必须
- 描述：为UserService编写完整单元测试
- 文件：backend/tests/test_services/test_user_service.py
- 参考：开发指南V3 - 9.3 单元测试示例
- 测试场景：
  - ✅ test_create_user_success: 注册成功
  - ✅ test_create_user_email_exists: 邮箱已存在
  - ✅ test_authenticate_success: 登录成功
  - ✅ test_authenticate_user_not_found: 用户不存在
  - ✅ test_authenticate_password_error: 密码错误
  - ✅ test_authenticate_user_disabled: 用户已禁用
  - ✅ test_update_user_success: 更新成功
- 验收：pytest tests/test_services/test_user_service.py -v 全部通过
- 覆盖率要求：> 80%
- 依赖：1.3.5
- 状态：⬜

1.3.7 [创建用户API端点]
- 描述：实现用户相关API接口
- 文件：backend/app/api/v1/endpoints/user.py
- 参考：开发指南V3 - 6.10 API端点示例
- 接口：
  - POST /users/register: 用户注册
  - POST /users/login: 用户登录
  - GET /users/me: 获取当前用户
  - PUT /users/me: 更新用户信息
  - POST /users/refresh: 刷新Token
- 依赖：1.3.5
- 状态：⬜

1.3.8 [编写用户API集成测试]
- 描述：编写用户API集成测试
- 文件：backend/tests/test_api/test_user.py
- 测试场景：
  - 注册→登录完整流程
  - Token认证测试
  - 参数验证测试
- 状态：⬜

1.3.9 [运行后端测试并验证覆盖率]
- 描述：运行所有测试，确保覆盖率达标
- 命令：pytest tests/ -v --cov=app --cov-report=term --cov-fail-under=80
- 验收：
  - ✅ 所有测试通过
  - ✅ 覆盖率 > 80%
- 依赖：1.3.6, 1.3.8
- 状态：⬜

1.3.10 [提交后端用户模块到Git]
- 描述：测试通过后，提交代码到dev分支
- 命令：
  git add .
  git commit -m "feat(user): 完成用户模块后端开发

  - User模型和数据库迁移
  - UserService业务逻辑
  - 用户API(注册/登录/信息)
  - 单元测试(覆盖率85%)"
  git push origin dev
- 依赖：1.3.9
- 状态：⬜

1.3.11 [创建用户状态管理]
- 描述：创建用户Pinia Store
- 文件：frontend/src/stores/user.ts
- 功能：
  - state: token, user, isLoggedIn
  - actions: login, logout, fetchUser
  - 持久化到localStorage
- 状态：⬜

1.3.12 [创建用户API请求]
- 描述：封装用户相关API请求
- 文件：frontend/src/api/user.ts
- 方法：
  - register()
  - login()
  - getCurrentUser()
  - updateUser()
- 状态：⬜

1.3.13 [创建登录页面]
- 描述：使用uipro创建登录页面
- 命令：uipro generate page "用户登录页面，居中卡片布局，包含邮箱密码输入和登录按钮，支持跳转注册"
- 文件：frontend/src/pages/user/login.vue
- 功能：
  - 表单验证
  - 登录成功跳转
  - 错误提示
- 状态：⬜

1.3.14 [创建注册页面]
- 描述：使用uipro创建注册页面
- 命令：uipro generate form "用户注册表单，包含邮箱、密码、确认密码、昵称，需要表单验证"
- 文件：frontend/src/pages/user/register.vue
- 功能：
  - 表单验证（邮箱格式、密码强度、确认密码匹配）
  - 注册成功跳转登录
- 状态：⬜

1.3.15 [创建个人中心页面]
- 描述：创建用户个人中心页面
- 文件：frontend/src/pages/user/profile.vue
- 功能：
  - 显示用户信息
  - 编辑昵称/头像
  - 显示积分余额
  - 显示能力评分
- 状态：⬜

1.3.16 [浏览器验证前端用户模块]
- 描述：在浏览器中验证所有用户页面功能
- 命令：npm run dev
- 验证项：
  - ✅ 登录页面正常显示
  - ✅ 注册页面表单验证正常
  - ✅ 登录成功后跳转首页
  - ✅ 个人中心数据正确显示
  - ✅ 退出登录功能正常
  - ✅ 深色模式切换正常
  - ✅ 响应式布局正常
- 参考：开发指南V3 - 7.7 前端验证清单
- 依赖：1.3.13~1.3.15
- 状态：⬜

1.3.17 [提交前端用户模块到Git]
- 描述：前端验证通过后，提交代码
- 命令：
  git add .
  git commit -m "feat(user): 完成用户模块前端开发

  - 用户状态管理(Pinia)
  - 登录/注册页面
  - 个人中心页面
  - 表单验证和错误提示"
  git push origin dev
- 依赖：1.3.16
- 状态：⬜
```

---

# Phase 2: 核心功能（Week 3-6）

## 2.1 知识点模块（Week 3）

```
2.1.1 [创建Topic模型(MySQL)]
- 描述：创建知识点表SQLAlchemy模型
- 文件：backend/app/models/mysql/topic.py
- 参考：PRD V4 - 10.数据库设计 - t_topic表
- 字段：
  - id: 知识点ID(字符串，如binary_search)
  - name: 名称
  - name_en: 英文名
  - category: 分类(basic/data_structure/dp/graph/string/math)
  - difficulty: 难度(1-5)
  - importance: 重要性(1-5)
  - prerequisites: 前置知识点(JSON)
  - related: 相关知识点(JSON)
  - description: 描述
  - estimated_hours: 预计学习时长
  - status: 状态
- 状态：⬜

2.1.2 [创建知识点Alembic迁移]
- 描述：生成知识点表迁移脚本
- 命令：alembic revision --autogenerate -m "create topic table"
- 依赖：2.1.1
- 状态：⬜

2.1.3 [创建知识图谱骨架YAML]
- 描述：编写知识图谱骨架定义文件
- 文件：knowledge-skeleton/knowledge-graph.yaml
- 参考：PRD V4 - 6.6 知识图谱骨架YAML示例
- 内容：
  - 6大分类：基础算法、数据结构、动态规划、图论、字符串、数学
  - 50+核心知识点
  - 每个知识点的依赖关系
- 状态：⬜

2.1.4 [创建知识骨架加载脚本]
- 描述：解析YAML并导入数据库
- 文件：backend/scripts/load_knowledge_skeleton.py
- 功能：
  - 解析YAML文件
  - 批量插入/更新知识点
  - 验证依赖关系完整性
- 依赖：2.1.3
- 状态：⬜

2.1.5 [创建TopicRepository]
- 描述：实现知识点数据访问层
- 文件：backend/app/repositories/mysql/topic_repo.py
- 方法：
  - get_by_id()
  - get_all()
  - get_by_category()
  - get_prerequisites()
  - get_related()
- 状态：⬜

2.1.6 [创建TopicService]
- 描述：实现知识点业务逻辑
- 文件：backend/app/services/topic_service.py
- 方法：
  - get_topic_tree(): 获取知识点树
  - get_topic_detail(): 获取详情
  - get_learning_path(): 生成学习路径
  - check_prerequisites(): 检查前置条件
- 状态：⬜

2.1.7 [编写TopicService单元测试] ⚠️必须
- 文件：backend/tests/test_services/test_topic_service.py
- 覆盖率要求：> 80%
- 依赖：2.1.6
- 状态：⬜

2.1.8 [创建知识点API端点]
- 文件：backend/app/api/v1/endpoints/topic.py
- 接口：
  - GET /topics: 获取知识点列表/树
  - GET /topics/{id}: 获取知识点详情
  - GET /topics/{id}/prerequisites: 前置知识点
  - GET /topics/{id}/related: 相关知识点
  - GET /topics/categories: 获取所有分类
- 状态：⬜

2.1.9 [提交知识点模块后端到Git]
- 依赖：2.1.7, 2.1.8
- 状态：⬜

2.1.10 [创建知识图谱页面]
- 描述：使用uipro创建可视化知识图谱
- 文件：frontend/src/pages/topic/index.vue
- 功能：
  - 树形结构展示
  - 按分类筛选
  - 点击查看详情
  - 显示依赖关系
- 状态：⬜

2.1.11 [创建TopicTree组件]
- 文件：frontend/src/components/topic/TopicTree.vue
- 功能：递归渲染知识点树
- 状态：⬜

2.1.12 [浏览器验证并提交前端]
- 依赖：2.1.10, 2.1.11
- 状态：⬜
```

## 2.2 笔记模块（Week 3-4）

```
2.2.1 [创建Note模型(MongoDB)]
- 描述：创建笔记Beanie文档模型
- 文件：backend/app/models/mongo/note.py
- 参考：开发指南V3 - 6.8 MongoDB模型示例
- 字段：
  - topic_id: 关联知识点
  - title: 标题
  - summary: 摘要
  - content_l1: L1直观引入
  - content_l2: L2核心原理
  - content_l3: L3代码实现
  - content_l4: L4实战分析
  - full_content: 完整Markdown
  - version: 版本号
  - sources: 内容来源
  - quality_score: AI质量评分
  - status: 状态(0草稿/1待审核/2已发布/3下架)
- 状态：⬜

2.2.2 [创建NoteFragment模型(MongoDB)]
- 描述：创建内容片段文档模型
- 文件：backend/app/models/mongo/fragment.py
- 参考：PRD V4 - 10.数据库设计
- 字段：
  - resource_id: 来源资源ID
  - topic_id: 关联知识点
  - layer: 所属层级(L1-L4)
  - content: 片段内容
  - metadata: 元数据(页码、时间戳等)
- 状态：⬜

2.2.3 [创建NoteRepository(MongoDB)]
- 文件：backend/app/repositories/mongo/note_repo.py
- 方法：
  - get_by_id()
  - get_by_topic_id()
  - search(): 全文搜索
  - create()
  - update()
  - update_status()
- 状态：⬜

2.2.4 [创建NoteService]
- 文件：backend/app/services/note_service.py
- 方法：
  - get_note(): 获取笔记详情
  - get_notes_by_topic(): 按知识点获取
  - search_notes(): 搜索笔记
  - get_published_notes(): 获取已发布笔记
  - increment_view_count(): 增加浏览次数
- 状态：⬜

2.2.5 [编写NoteService单元测试] ⚠️必须
- 文件：backend/tests/test_services/test_note_service.py
- 覆盖率要求：> 80%
- 状态：⬜

2.2.6 [创建笔记API端点]
- 文件：backend/app/api/v1/endpoints/note.py
- 接口：
  - GET /notes: 笔记列表(分页、筛选)
  - GET /notes/{id}: 笔记详情
  - GET /notes/topic/{topic_id}: 按知识点查询
  - GET /notes/search: 搜索笔记
- 状态：⬜

2.2.7 [提交笔记模块后端到Git]
- 依赖：2.2.5, 2.2.6
- 状态：⬜

2.2.8 [创建笔记列表页面]
- 命令：uipro generate list "笔记列表页，卡片网格布局，每张卡片显示标题、难度星级、摘要、标签，支持搜索和分类筛选"
- 文件：frontend/src/pages/note/index.vue
- 功能：
  - 卡片网格布局
  - 搜索框
  - 分类筛选
  - 分页
- 状态：⬜

2.2.9 [创建笔记详情页面]
- 文件：frontend/src/pages/note/[id].vue
- 参考：开发指南V3 - 7.5 组件使用示例
- 功能：
  - 标题和元信息
  - L1-L4标签页切换
  - Markdown渲染
  - 代码高亮
  - LaTeX公式渲染
  - 来源引用
- 状态：⬜

2.2.10 [创建NoteCard组件]
- 文件：frontend/src/components/note/NoteCard.vue
- 功能：笔记卡片展示
- 状态：⬜

2.2.11 [创建NoteLayerTabs组件]
- 文件：frontend/src/components/note/NoteLayerTabs.vue
- 功能：L1-L4层级切换
- 状态：⬜

2.2.12 [创建MarkdownRenderer组件]
- 文件：frontend/src/components/note/MarkdownRenderer.vue
- 功能：
  - Markdown渲染
  - 代码高亮(highlight.js)
  - LaTeX公式(KaTeX)
- 状态：⬜

2.2.13 [浏览器验证笔记模块]
- 验证项：
  - ✅ 笔记列表正常显示
  - ✅ 搜索和筛选功能正常
  - ✅ 笔记详情L1-L4切换正常
  - ✅ Markdown渲染正确
  - ✅ 代码高亮正常
  - ✅ LaTeX公式渲染正确
- 状态：⬜

2.2.14 [提交笔记模块前端到Git]
- 依赖：2.2.13
- 状态：⬜
```

## 2.3 积分模块（Week 5）

```
2.3.1 [创建PointLog模型(MySQL)]
- 描述：创建积分流水表
- 文件：backend/app/models/mysql/point.py
- 参考：PRD V4 - 10.数据库设计 - t_point_log
- 字段：
  - id: 流水ID
  - user_id: 用户ID
  - type: 类型(recharge/consume/refund/gift)
  - amount: 变动数量(正负)
  - balance: 变动后余额
  - reason: 变动原因
  - related_id: 关联ID(订单/会话)
- 状态：⬜

2.3.2 [创建Order模型(MySQL)]
- 描述：创建充值订单表
- 文件：backend/app/models/mysql/order.py
- 参考：PRD V4 - 10.数据库设计 - t_order
- 字段：
  - id: 订单ID
  - order_no: 订单号
  - user_id: 用户ID
  - package_id: 套餐ID
  - amount: 金额(分)
  - points: 积分数量
  - status: 状态(pending/paid/failed/refunded)
  - pay_channel: 支付渠道
  - paid_at: 支付时间
- 状态：⬜

2.3.3 [创建Package模型(MySQL)]
- 描述：创建积分套餐表
- 文件：backend/app/models/mysql/package.py
- 参考：PRD V4 - 2.2 积分套餐
- 字段：id, name, price, points, bonus_points, description, status
- 状态：⬜

2.3.4 [创建积分Alembic迁移]
- 命令：alembic revision --autogenerate -m "create point tables"
- 依赖：2.3.1, 2.3.2, 2.3.3
- 状态：⬜

2.3.5 [创建PointService]
- 文件：backend/app/services/point_service.py
- 方法：
  - get_balance(): 获取余额
  - get_logs(): 获取流水
  - recharge(): 充值(内部)
  - consume(): 消费(扣减)
  - check_balance(): 余额检查
  - create_order(): 创建充值订单
  - complete_order(): 完成订单(回调)
- 注意：消费操作需要事务和并发控制
- 状态：⬜

2.3.6 [编写PointService单元测试] ⚠️必须
- 文件：backend/tests/test_services/test_point_service.py
- 测试场景：
  - ✅ 充值成功
  - ✅ 消费成功
  - ✅ 余额不足时消费失败
  - ✅ 流水记录正确
  - ✅ 并发消费测试
- 覆盖率要求：> 80%
- 状态：⬜

2.3.7 [创建积分API端点]
- 文件：backend/app/api/v1/endpoints/point.py
- 接口：
  - GET /points/balance: 查询余额
  - GET /points/logs: 积分流水
  - GET /points/packages: 获取套餐列表
  - POST /points/orders: 创建充值订单
  - POST /points/orders/{id}/callback: 支付回调(模拟)
- 状态：⬜

2.3.8 [提交积分模块后端到Git]
- 依赖：2.3.6, 2.3.7
- 状态：⬜

2.3.9 [创建积分中心页面]
- 文件：frontend/src/pages/point/index.vue
- 功能：
  - 显示当前余额
  - 积分流水列表
  - 充值入口
- 状态：⬜

2.3.10 [创建充值页面]
- 文件：frontend/src/pages/point/recharge.vue
- 功能：
  - 套餐选择(卡片式)
  - 支付方式选择
  - 创建订单
  - 支付结果处理
- 参考：PRD V4 - 2.2 积分套餐
- 状态：⬜

2.3.11 [浏览器验证并提交前端]
- 依赖：2.3.9, 2.3.10
- 状态：⬜
```

## 2.4 AI教练模块（Week 5-6）

```
2.4.1 [创建Claude API客户端]
- 描述：封装Claude API调用
- 文件：backend/app/infrastructure/ai/claude_client.py
- 参考：PRD V4 - 11.技术栈选型
- 功能：
  - chat(): 普通对话
  - chat_stream(): 流式对话(SSE)
  - count_tokens(): Token计数
  - 错误处理和重试
  - 日志记录
- 状态：⬜

2.4.2 [创建DeepSeek API客户端(备选)]
- 文件：backend/app/infrastructure/ai/deepseek_client.py
- 功能：作为Claude的备选方案
- 状态：⬜

2.4.3 [创建ChatSession模型(MongoDB)]
- 文件：backend/app/models/mongo/chat.py
- 字段：
  - user_id: 用户ID
  - title: 会话标题
  - topic_id: 关联知识点(可选)
  - message_count: 消息数
  - total_tokens: 总Token消耗
  - status: 状态
- 状态：⬜

2.4.4 [创建ChatMessage模型(MongoDB)]
- 文件：backend/app/models/mongo/chat.py (同文件)
- 字段：
  - session_id: 会话ID
  - role: 角色(user/assistant)
  - content: 消息内容
  - tokens: Token数
  - cost: 成本
- 状态：⬜

2.4.5 [创建AILog模型(MongoDB)]
- 描述：AI调用日志
- 文件：backend/app/models/mongo/log.py
- 参考：开发指南V3 - 10.2 操作日志存储
- 字段：
  - user_id: 用户ID
  - session_id: 会话ID
  - model: 模型名称
  - prompt_tokens: 输入Token
  - completion_tokens: 输出Token
  - cost: 成本
  - latency: 延迟(ms)
  - status: 状态(SUCCESS/FAIL)
- 状态：⬜

2.4.6 [创建CoachService]
- 文件：backend/app/services/coach_service.py
- 方法：
  - create_session(): 创建会话
  - get_sessions(): 获取会话列表
  - get_messages(): 获取历史消息
  - chat(): 发送消息(流式)
  - close_session(): 关闭会话
- 功能：
  - 流式响应(SSE)
  - 积分扣除
  - RAG增强(基于笔记)
  - 消息历史管理
- 依赖：2.4.1, 2.4.3, 2.4.4, 2.3.5
- 状态：⬜

2.4.7 [编写CoachService单元测试] ⚠️必须
- 文件：backend/tests/test_services/test_coach_service.py
- 测试场景：
  - ✅ 创建会话成功
  - ✅ 发送消息成功
  - ✅ 积分不足时拒绝
  - ✅ AI调用失败处理
  - ✅ Token计数正确
- 覆盖率要求：> 80%
- 状态：⬜

2.4.8 [创建AI教练API端点]
- 文件：backend/app/api/v1/endpoints/coach.py
- 接口：
  - POST /coach/sessions: 创建会话
  - GET /coach/sessions: 会话列表
  - GET /coach/sessions/{id}: 会话详情
  - GET /coach/sessions/{id}/messages: 历史消息
  - POST /coach/chat: 发送消息(SSE流式)
  - DELETE /coach/sessions/{id}: 关闭会话
- 注意：/chat 需要支持SSE流式响应
- 状态：⬜

2.4.9 [提交AI教练模块后端到Git]
- 依赖：2.4.7, 2.4.8
- 状态：⬜

2.4.10 [创建AI教练状态管理]
- 文件：frontend/src/stores/coach.ts
- 状态：sessions, currentSession, messages, isStreaming
- 状态：⬜

2.4.11 [创建AI对话页面]
- 文件：frontend/src/pages/coach/index.vue
- 功能：
  - 左侧会话列表
  - 右侧聊天窗口
  - 流式消息显示
  - 发送消息输入框
- 状态：⬜

2.4.12 [创建ChatWindow组件]
- 文件：frontend/src/components/coach/ChatWindow.vue
- 功能：
  - 消息列表显示
  - 发送消息
  - 自动滚动到底部
- 状态：⬜

2.4.13 [创建MessageItem组件]
- 文件：frontend/src/components/coach/MessageItem.vue
- 功能：
  - 用户/助手消息区分
  - Markdown渲染
  - 流式打字效果
- 状态：⬜

2.4.14 [创建SessionList组件]
- 文件：frontend/src/components/coach/SessionList.vue
- 功能：
  - 会话列表展示
  - 新建会话
  - 切换会话
- 状态：⬜

2.4.15 [实现SSE流式响应处理]
- 描述：前端处理服务端SSE流式响应
- 文件：frontend/src/api/coach.ts
- 功能：使用EventSource或fetch处理流式响应
- 状态：⬜

2.4.16 [浏览器验证AI教练模块]
- 验证项：
  - ✅ 创建会话成功
  - ✅ 消息发送正常
  - ✅ 流式响应正常显示(逐字出现)
  - ✅ 历史消息加载正常
  - ✅ 会话切换正常
  - ✅ 积分扣减正常
- 状态：⬜

2.4.17 [提交AI教练模块前端到Git]
- 依赖：2.4.16
- 状态：⬜
```

---

# Phase 3: 管理后台（Week 7-8）

## 3.1 资源管理模块（Week 7）

```
3.1.1 [创建Resource模型(MySQL)]
- 描述：创建资源表
- 文件：backend/app/models/mysql/resource.py
- 参考：PRD V4 - 10.数据库设计 - t_resource
- 字段：
  - id: 资源ID
  - type: 类型(pdf/video/blog/leetcode)
  - title: 标题
  - url: 原始URL
  - file_path: MinIO文件路径
  - file_size: 文件大小
  - process_status: 处理状态(pending/processing/completed/failed)
  - review_status: 审核状态
  - uploader_id: 上传者ID
- 状态：⬜

3.1.2 [创建资源Alembic迁移]
- 命令：alembic revision --autogenerate -m "create resource table"
- 状态：⬜

3.1.3 [创建ResourceService]
- 文件：backend/app/services/resource_service.py
- 方法：
  - upload_file(): 上传文件到MinIO
  - get_resources(): 获取资源列表
  - get_resource(): 获取资源详情
  - update_status(): 更新处理状态
  - delete_resource(): 删除资源
- 状态：⬜

3.1.4 [编写ResourceService单元测试] ⚠️必须
- 文件：backend/tests/test_services/test_resource_service.py
- 覆盖率要求：> 80%
- 状态：⬜

3.1.5 [配置Celery任务队列]
- 文件：backend/app/tasks/celery_app.py
- 功能：
  - Celery应用配置
  - Redis作为Broker
  - 任务重试配置
- 参考：开发指南V3 - 3.3 Celery配置
- 状态：⬜

3.1.6 [创建PDF解析任务]
- 文件：backend/app/tasks/resource_tasks.py
- 功能：
  - parse_pdf_task(): 异步PDF解析
  - 调用Doc2X/Nougat API
  - 提取文本和公式
  - 标记低置信度区域
  - 存储解析结果
- 参考：PRD V4 - 6.4.1 PDF解析与人工校对
- 状态：⬜

3.1.7 [创建资源API端点]
- 文件：backend/app/api/v1/endpoints/resource.py
- 接口：
  - POST /resources/upload: 上传资源
  - GET /resources: 资源列表
  - GET /resources/{id}: 资源详情
  - PUT /resources/{id}/status: 更新状态
  - DELETE /resources/{id}: 删除资源
  - POST /resources/{id}/parse: 触发解析
- 状态：⬜

3.1.8 [提交资源模块后端到Git]
- 依赖：3.1.4, 3.1.7
- 状态：⬜
```

## 3.2 管理后台页面（Week 7-8）

```
3.2.1 [创建管理后台布局]
- 文件：frontend/src/layouts/AdminLayout.vue
- 功能：
  - 侧边栏导航
  - 顶部栏(用户信息)
  - 权限检查
- 状态：⬜

3.2.2 [创建Dashboard页面]
- 文件：frontend/src/pages/admin/index.vue
- 功能：
  - 数据统计卡片(用户数、笔记数、收入)
  - 图表展示(注册趋势、收入趋势)
  - 待处理任务提醒
- 状态：⬜

3.2.3 [创建资源管理页面]
- 文件：frontend/src/pages/admin/resources.vue
- 功能：
  - 资源列表(表格)
  - 拖拽上传PDF/视频
  - 上传进度显示
  - 处理状态显示
  - 触发解析按钮
- 状态：⬜

3.2.4 [创建PDF校对器页面]
- 文件：frontend/src/pages/admin/pdf-review.vue
- 参考：PRD V4 - 8.2.2 PDF校对器
- 功能：
  - 左侧：PDF原文切片截图
  - 右侧：Markdown解析结果
  - 高亮显示低置信度公式(黄色背景)
  - 一键修复/确认按钮
  - 批量通过/拒绝
- 注意：这是核心功能，需要仔细实现
- 状态：⬜

3.2.5 [创建笔记审核页面]
- 文件：frontend/src/pages/admin/notes.vue
- 参考：PRD V4 - 8.2.3 内容审核台
- 功能：
  - 待审核笔记列表
  - AI质量评分显示
  - 内容预览
  - 通过/编辑/退回操作
  - 审核意见填写
- 状态：⬜

3.2.6 [创建用户管理页面]
- 文件：frontend/src/pages/admin/users.vue
- 功能：
  - 用户列表(表格)
  - 搜索筛选
  - 状态管理(禁用/启用)
  - 积分调整
  - 角色设置
- 状态：⬜

3.2.7 [浏览器验证管理后台]
- 验证项：
  - ✅ Dashboard数据正确显示
  - ✅ 资源上传功能正常
  - ✅ PDF校对器左右对照正常
  - ✅ 笔记审核流程正常
  - ✅ 用户管理功能正常
- 状态：⬜

3.2.8 [提交管理后台前端到Git]
- 依赖：3.2.7
- 状态：⬜
```

## 3.3 笔记生成引擎（Week 8）

```
3.3.1 [创建笔记生成Prompt模板]
- 文件：backend/app/prompts/note_generation.py
- 参考：PRD V4 - 6.7 Prompt工程规范
- 内容：
  - L1生成Prompt: 直观引入
  - L2生成Prompt: 核心原理
  - L3生成Prompt: 代码实现
  - L4生成Prompt: 实战分析
  - 融合Prompt: 整合四层
- 状态：⬜

3.3.2 [创建NoteGenerationService]
- 文件：backend/app/services/note_generation_service.py
- 参考：PRD V4 - 6.3 笔记生成策略 (Layered RAG)
- 方法：
  - generate_note(): 生成完整笔记
  - generate_layer(): 生成单层内容
  - fetch_fragments(): 获取相关片段
  - merge_layers(): 融合四层内容
  - evaluate_quality(): AI质量评估
- 流程：
  1. 根据topic_id查找相关内容片段
  2. L1: 从视频/博客片段生成直观引入
  3. L2: 从PDF书籍片段生成原理讲解
  4. L3: 从LeetCode题解生成代码实现
  5. L4: 整合实战分析
  6. 融合四层生成完整笔记
  7. AI质量评估
- 状态：⬜

3.3.3 [创建笔记生成Celery任务]
- 文件：backend/app/tasks/note_tasks.py
- 任务：
  - generate_note_task(): 异步生成笔记
  - batch_generate_task(): 批量生成
- 功能：
  - 进度更新
  - 错误处理
  - 重试机制
- 状态：⬜

3.3.4 [编写笔记生成单元测试] ⚠️必须
- 文件：backend/tests/test_services/test_note_generation_service.py
- 测试场景：
  - 单层生成测试
  - 完整笔记生成测试
  - 质量评估测试
- 覆盖率要求：> 80%
- 状态：⬜

3.3.5 [创建笔记生成管理API]
- 文件：backend/app/api/v1/endpoints/admin.py (追加)
- 接口：
  - POST /admin/notes/generate: 触发笔记生成
  - GET /admin/notes/generate/{task_id}: 查询生成进度
  - POST /admin/notes/{id}/publish: 发布笔记
  - POST /admin/notes/{id}/reject: 退回笔记
- 状态：⬜

3.3.6 [提交笔记生成模块到Git]
- 依赖：3.3.4, 3.3.5
- 状态：⬜
```

---

# Phase 4: 收尾与发布（Week 9-10）

## 4.1 宣传页面（Week 9）

```
4.1.1 [创建Landing Page]
- 文件：landing-page/index.html
- 参考：PRD V4 - 产品定位
- 内容模块：
  - Hero区域：标题、价值主张、CTA按钮
  - Features：核心功能展示(笔记、AI教练、知识图谱)
  - Note Preview：笔记示例展示
  - Pricing：定价方案
  - Testimonials：用户评价
  - FAQ：常见问题
  - Footer：页脚链接
- 技术要求：
  - 单HTML文件，内联CSS/JS
  - 深色科技风格
  - 响应式设计
  - 滚动动画
- 状态：⬜

4.1.2 [浏览器验证Landing Page]
- 验证项：
  - ✅ 视觉效果美观
  - ✅ 响应式布局正常
  - ✅ 动画效果流畅
  - ✅ 所有链接正常
- 状态：⬜

4.1.3 [提交Landing Page到Git]
- 依赖：4.1.2
- 状态：⬜
```

## 4.2 文档完善（Week 9）

```
4.2.1 [完善根目录README.md]
- 内容：
  - 项目简介
  - 技术栈
  - 快速开始
  - 项目结构
  - 开发指南链接
- 状态：⬜

4.2.2 [完善API文档]
- 文件：docs/API.md
- 内容：
  - 所有API接口说明
  - 请求/响应示例
  - 错误码说明
- 来源：从FastAPI /docs 导出整理
- 状态：⬜

4.2.3 [完善数据库文档]
- 文件：docs/DATABASE.md
- 内容：
  - MySQL表结构说明
  - MongoDB集合说明
  - ER图
  - 索引设计
- 状态：⬜

4.2.4 [完善部署文档]
- 文件：docs/DEPLOYMENT.md
- 内容：
  - 环境要求
  - Docker部署步骤
  - 环境变量说明
  - Nginx配置
  - SSL配置
- 参考：开发指南V3 - 12.部署流程
- 状态：⬜

4.2.5 [创建CHANGELOG.md]
- 文件：CHANGELOG.md
- 内容：v1.0.0版本变更记录
- 状态：⬜

4.2.6 [提交文档到Git]
- 依赖：4.2.1~4.2.5
- 状态：⬜
```

## 4.3 测试与发布（Week 10）

```
4.3.1 [运行全量单元测试]
- 命令：
  cd backend
  pytest tests/ -v --cov=app --cov-report=html --cov-report=term
- 验收：
  - ✅ 所有测试通过
  - ✅ 总覆盖率 > 80%
- 状态：⬜

4.3.2 [执行集成测试]
- 描述：测试完整业务流程
- 测试场景：
  - 用户流程：注册→登录→浏览笔记→AI对话→积分消费
  - 管理流程：上传资源→PDF解析→笔记生成→审核发布
- 状态：⬜

4.3.3 [执行性能测试]
- 工具：locust 或 wrk
- 测试接口：
  - GET /notes (列表)
  - GET /notes/{id} (详情)
  - POST /coach/chat (AI对话)
- 指标要求：
  - API响应时间 P99 < 500ms
  - 并发支持 > 100 QPS
- 状态：⬜

4.3.4 [安全审查]
- 检查项：
  - ✅ SQL注入防护 (SQLAlchemy参数化)
  - ✅ XSS防护 (前端转义)
  - ✅ CSRF防护 (Token验证)
  - ✅ 敏感信息脱敏 (日志中不打印密码)
  - ✅ 密码加密存储 (bcrypt)
  - ✅ JWT安全配置
  - ✅ CORS配置正确
- 状态：⬜

4.3.5 [创建生产环境Docker配置]
- 文件：docker/docker-compose.yml
- 内容：生产环境完整配置
- 参考：开发指南V3 - 12.1 Docker部署
- 状态：⬜

4.3.6 [创建部署脚本]
- 文件：scripts/deploy.sh
- 参考：开发指南V3 - 12.2 部署脚本
- 功能：
  - 拉取代码
  - 运行测试
  - 构建镜像
  - 数据库迁移
  - 重启服务
  - 健康检查
- 状态：⬜

4.3.7 [合并到Master分支]
- 命令：
  git checkout master
  git merge dev
  git push origin master
- 依赖：4.3.1~4.3.4
- 状态：⬜

4.3.8 [打版本标签]
- 命令：
  git tag -a v1.0.0 -m "Release v1.0.0 - 首个正式版本

  主要功能：
  - 用户系统(注册/登录)
  - 笔记系统(L1-L4分层)
  - 知识图谱
  - AI教练(流式对话)
  - 积分系统
  - 管理后台(资源管理/PDF校对/笔记审核)"
  git push origin v1.0.0
- 依赖：4.3.7
- 状态：⬜

4.3.9 [执行生产部署]
- 命令：./scripts/deploy.sh
- 验收：生产环境可正常访问
- 依赖：4.3.6, 4.3.8
- 状态：⬜

4.3.10 [部署后验证]
- 验证项：
  - ✅ 首页正常访问
  - ✅ 用户注册登录正常
  - ✅ 笔记浏览正常
  - ✅ AI对话正常
  - ✅ 管理后台正常
  - ✅ HTTPS证书正常
- 依赖：4.3.9
- 状态：⬜
```

---

# 📌 补充说明：信息缺失或待确认事项

## 1. 需要进一步明确的需求

```
❓ 1.1 支付集成
- 问题：PRD中提到微信/支付宝支付，但未提供具体对接信息
- 建议：确认支付渠道、商户号等配置
- 当前方案：先实现模拟支付回调，后续对接真实支付
- 影响任务：2.3.7, 2.3.10

❓ 1.2 LeetCode浏览器插件
- 问题：PRD设计了Chrome插件采集方案，但开发指南未详细说明
- 建议：确认是否在MVP范围内
- 当前方案：暂不实现，作为Phase 5扩展
- 影响：需新增任务

❓ 1.3 Claude API vs DeepSeek API
- 问题：需确认主要使用哪个AI服务
- 建议：确认API Key、调用限制、成本预算
- 当前方案：主用Claude，DeepSeek作为备选
- 影响任务：2.4.1, 2.4.2

❓ 1.4 PDF解析服务选型
- 问题：Doc2X vs Nougat 二选一
- 建议：根据成本和效果选择
- 当前方案：优先Doc2X，提供切换配置
- 影响任务：3.1.6

❓ 1.5 向量数据库选型
- 问题：Milvus vs ChromaDB
- 建议：开发环境用ChromaDB(简单)，生产可切换Milvus
- 当前方案：先用ChromaDB
- 影响任务：2.4.6 (RAG增强)
```

## 2. 开发指南中未完全覆盖的内容

```
⚠️ 2.1 Celery Worker启动
- 问题：需补充Celery Worker启动命令
- 建议：celery -A app.tasks.celery_app worker --loglevel=info
- 影响任务：3.1.5, 3.1.6, 3.3.3

⚠️ 2.2 SSE流式响应实现
- 问题：FastAPI SSE实现细节未详细说明
- 建议：使用sse-starlette库或自定义StreamingResponse
- 影响任务：2.4.8

⚠️ 2.3 ChromaDB集成
- 问题：向量数据库客户端实现未详细说明
- 建议：补充ChromaDB Python客户端使用
- 文件：backend/app/infrastructure/vector/chromadb_client.py
- 影响任务：2.4.6

⚠️ 2.4 CI/CD流程
- 问题：自动化测试和部署流程未详细说明
- 建议：可后续配置GitHub Actions
- 影响任务：Phase 4 部署相关
```

## 3. 建议优先处理的风险项

```
🔴 高风险：AI服务集成
- 风险：API调用成本可能超出预算
- 建议：先完成2.4.1，测试Token消耗和成本
- 缓解措施：设置Token限制，添加成本监控

🔴 高风险：PDF解析质量
- 风险：公式识别准确率可能不达标
- 建议：先完成3.1.6，评估解析质量
- 缓解措施：PDF校对器人工校正

🟡 中风险：流式响应前端处理
- 风险：SSE在某些浏览器/网络环境可能不稳定
- 建议：添加重连机制和错误处理
- 影响任务：2.4.15

🟢 低风险：前端UI一致性
- 风险：uipro生成的组件风格可能不一致
- 建议：定期review，统一设计规范
```

---

# 📊 任务统计汇总

| 类别 | 任务数量 | 占比 |
|------|----------|------|
| 环境配置 | 12 | 10% |
| 后端开发 | 48 | 42% |
| 前端开发 | 35 | 30% |
| 测试任务 | 10 | 9% |
| 文档任务 | 6 | 5% |
| 部署任务 | 4 | 4% |
| **总计** | **115** | 100% |

---

# ✅ 使用说明

## 1. 任务状态标记

```
⬜ 待开始    - 任务尚未开始
🔄 进行中    - 任务正在进行
✅ 已完成    - 任务已完成
❌ 已取消    - 任务被取消
⚠️ 必须完成  - 关键任务，不可跳过
```

## 2. 执行顺序

1. **严格按Phase顺序执行**
2. 同一Phase内按任务编号顺序执行
3. 注意任务依赖关系（依赖项必须先完成）
4. ⚠️标记的测试任务必须完成且通过

## 3. Git提交规范

```bash
# 每个模块完成后必须：
# 1. 运行单元测试
pytest tests/ -v --cov=app --cov-fail-under=80

# 2. 测试通过后提交
git add .
git commit -m "<type>(<scope>): <subject>"
git push origin dev
```

## 4. 关键检查点

| 检查点 | 任务编号 | 验收标准 |
|--------|----------|----------|
| 后端骨架完成 | 1.1.21 | 服务启动，/health正常 |
| 用户系统完成 | 1.3.17 | 注册登录功能正常 |
| 笔记系统完成 | 2.2.14 | L1-L4展示正常 |
| AI教练完成 | 2.4.17 | 流式对话正常 |
| 管理后台完成 | 3.2.8 | PDF校对器正常 |
| 发布上线 | 4.3.10 | 生产环境可访问 |

---

> 📅 **建议Review周期**: 每周五下午  
> 📧 **问题反馈**: 在任务中标记❓并说明问题  
> 🔄 **更新频率**: 每完成一个Phase更新一次状态
