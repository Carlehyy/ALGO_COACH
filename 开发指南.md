# ACMç®—æ³•å­¦ä¹ å¹³å° - é¡¹ç›®å¼€å‘æŒ‡å— V3

> **ç‰ˆæœ¬**: V3.0  
> **æ›´æ–°æ—¥æœŸ**: 2026å¹´1æœˆ  
> **é€‚ç”¨äº**: Claude Code / AI Agent å¼€å‘ç¯å¢ƒ  
> **é¡¹ç›®ä»£å·**: `acm-learning-platform`  
> **åç«¯æŠ€æœ¯**: Python 3.11+ / FastAPI

---

## ğŸ“‘ ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#1-é¡¹ç›®æ¦‚è¿°)
2. [æŠ€æœ¯æ¶æ„](#2-æŠ€æœ¯æ¶æ„)
3. [å¼€å‘ç¯å¢ƒé…ç½®](#3-å¼€å‘ç¯å¢ƒé…ç½®)
4. [é¡¹ç›®ç›®å½•ç»“æ„](#4-é¡¹ç›®ç›®å½•ç»“æ„)
5. [Gitç‰ˆæœ¬æ§åˆ¶è§„èŒƒ](#5-gitç‰ˆæœ¬æ§åˆ¶è§„èŒƒ)
6. [Pythonåç«¯å¼€å‘è§„èŒƒ](#6-pythonåç«¯å¼€å‘è§„èŒƒ)
7. [å‰ç«¯å¼€å‘è§„èŒƒï¼ˆuiproï¼‰](#7-å‰ç«¯å¼€å‘è§„èŒƒuipro)
8. [æ•°æ®åº“è®¾è®¡è§„èŒƒ](#8-æ•°æ®åº“è®¾è®¡è§„èŒƒ)
9. [æµ‹è¯•ç­–ç•¥](#9-æµ‹è¯•ç­–ç•¥)
10. [æ—¥å¿—ä¸ç›‘æ§](#10-æ—¥å¿—ä¸ç›‘æ§)
11. [APIè®¾è®¡è§„èŒƒ](#11-apiè®¾è®¡è§„èŒƒ)
12. [éƒ¨ç½²æµç¨‹](#12-éƒ¨ç½²æµç¨‹)
13. [å¼€å‘ä»»åŠ¡åˆ†è§£](#13-å¼€å‘ä»»åŠ¡åˆ†è§£)
14. [é™„å½•](#14-é™„å½•)

---

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®ç®€ä»‹

ACMç®—æ³•å­¦ä¹ å¹³å°æ˜¯ä¸€ä¸ª**AIé©±åŠ¨çš„ä¸ªæ€§åŒ–ç®—æ³•å­¦ä¹ å¹³å°**ï¼Œæ ¸å¿ƒåŠŸèƒ½æ˜¯å°†å¤šæºå­¦ä¹ èµ„æ–™ï¼ˆä¹¦ç±PDFã€åšå®¢ã€è§†é¢‘ã€LeetCodeé¢˜è§£ï¼‰é€šè¿‡AIèåˆï¼Œç”Ÿæˆç”±æµ…å…¥æ·±çš„é«˜è´¨é‡å­¦ä¹ ç¬”è®°ã€‚

### 1.2 æ ¸å¿ƒä»·å€¼ä¸»å¼ 

```
ğŸ“š å¤šæºèåˆ â†’ ğŸ¤– AIå¤„ç† â†’ ğŸ“ åˆ†å±‚ç¬”è®° â†’ ğŸ¯ ä¸ªæ€§åŒ–å­¦ä¹ 
```

- **L1 ç›´è§‚å¼•å…¥**ï¼šç”Ÿæ´»ç±»æ¯”ã€åŠ¨ç”»æ¼”ç¤º
- **L2 æ ¸å¿ƒåŸç†**ï¼šä¸¥è°¨æ¨å¯¼ã€æ•°å­¦è¯æ˜
- **L3 ä»£ç å®ç°**ï¼šé€è¡Œæ³¨é‡Šã€å¤æ‚åº¦åˆ†æ
- **L4 å®æˆ˜åˆ†æ**ï¼šä¾‹é¢˜ç²¾è®²ã€å˜ä½“æ€»ç»“

### 1.3 æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

| æ¨¡å— | åŠŸèƒ½æè¿° | ä¼˜å…ˆçº§ | æŠ€æœ¯è¦ç‚¹ |
|------|----------|--------|----------|
| æ™ºèƒ½ç¬”è®°ç³»ç»Ÿ | å¤šæºæ•°æ®èåˆï¼ŒL1-L4åˆ†å±‚ç¬”è®° | P0 | Layered RAG |
| çŸ¥è¯†å›¾è°± | ç®—æ³•çŸ¥è¯†ç‚¹ç»“æ„åŒ–ç®¡ç† | P0 | YAMLéª¨æ¶ + å¯è§†åŒ– |
| ç§‘å­¦èƒ½åŠ›è¯„ä¼° | å…­ç»´åº¦è¯„ä¼° + AIæµ‹è¯„ | P1 | Claude API |
| AIæ•™ç»ƒç³»ç»Ÿ | æ™ºèƒ½é—®ç­”ã€å­¦ä¹ è®¡åˆ’ | P1 | æµå¼SSE |
| ç§¯åˆ†ç³»ç»Ÿ | å……å€¼ã€æ¶ˆè´¹ã€æƒé™æ§åˆ¶ | P1 | æ”¯ä»˜é›†æˆ |
| ç®¡ç†åå° | èµ„æºä¸Šä¼ ã€PDFæ ¡å¯¹ã€å®¡æ ¸ | P0 | MinIO + Celery |

### 1.4 éœ€æ±‚æ–‡æ¡£

å®Œæ•´éœ€æ±‚è¯·å‚é˜…ï¼š`docs/PRD-V4.md`

---

## 2. æŠ€æœ¯æ¶æ„

### 2.1 æŠ€æœ¯æ ˆæ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         æŠ€æœ¯æ¶æ„æ€»è§ˆ V3                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      å‰ç«¯å±‚ (Frontend)                       â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  æ¡†æ¶: uipro (UI/UX Pro Max)                                â”‚   â”‚
â”‚  â”‚  åˆå§‹åŒ–: uipro init --ai claude                             â”‚   â”‚
â”‚  â”‚  å®˜ç½‘: https://ui.cod.ndjp.net/                             â”‚   â”‚
â”‚  â”‚  æ„å»º: Vite 5 + Vue 3 + TypeScript                          â”‚   â”‚
â”‚  â”‚  çŠ¶æ€ç®¡ç†: Pinia                                             â”‚   â”‚
â”‚  â”‚  ç‰¹ç‚¹: AIè¾…åŠ©ç”Ÿæˆé«˜è´¨é‡UIç»„ä»¶                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â†“                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    åç«¯å±‚ (Backend) - Python                 â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  è¯­è¨€: Python 3.11+                                         â”‚   â”‚
â”‚  â”‚  Webæ¡†æ¶: FastAPI 0.109+                                    â”‚   â”‚
â”‚  â”‚  ASGIæœåŠ¡å™¨: Uvicorn                                        â”‚   â”‚
â”‚  â”‚  ORM: SQLAlchemy 2.0 (MySQL) + Beanie (MongoDB)             â”‚   â”‚
â”‚  â”‚  ä»»åŠ¡é˜Ÿåˆ—: Celery 5.3 + Redis                               â”‚   â”‚
â”‚  â”‚  APIæ–‡æ¡£: è‡ªåŠ¨ç”Ÿæˆ (OpenAPI/Swagger)                        â”‚   â”‚
â”‚  â”‚  è®¤è¯: JWT (python-jose)                                    â”‚   â”‚
â”‚  â”‚  æ•°æ®éªŒè¯: Pydantic 2.0                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â†“                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                       æ•°æ®å±‚ (Data)                          â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  ç»“æ„åŒ–æ•°æ®: MySQL 8.0                                       â”‚   â”‚
â”‚  â”‚    â””â”€â”€ ç”¨æˆ·ã€è®¢å•ã€ç§¯åˆ†ã€çŸ¥è¯†ç‚¹å…ƒæ•°æ®                         â”‚   â”‚
â”‚  â”‚  éç»“æ„åŒ–æ•°æ®: MongoDB 6.0                                   â”‚   â”‚
â”‚  â”‚    â””â”€â”€ ç¬”è®°å†…å®¹ã€AIå¯¹è¯ã€æ—¥å¿—æ–‡æ¡£                            â”‚   â”‚
â”‚  â”‚  ç¼“å­˜å±‚: Redis 7.0                                          â”‚   â”‚
â”‚  â”‚    â””â”€â”€ ä¼šè¯ç¼“å­˜ã€çƒ­ç‚¹æ•°æ®ã€æ¶ˆæ¯é˜Ÿåˆ—                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â†“                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      å­˜å‚¨å±‚ (Storage)                        â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  å¯¹è±¡å­˜å‚¨: MinIO (S3å…¼å®¹)                                    â”‚   â”‚
â”‚  â”‚    â””â”€â”€ PDFæ–‡ä»¶ã€å›¾ç‰‡ã€è§†é¢‘ã€ç”¨æˆ·ä¸Šä¼                          â”‚   â”‚
â”‚  â”‚  å‘é‡æ•°æ®åº“: Milvus / ChromaDB                               â”‚   â”‚
â”‚  â”‚    â””â”€â”€ ç¬”è®°å‘é‡ã€è¯­ä¹‰æ£€ç´¢                                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â†“                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    AIæœåŠ¡å±‚ (AI Services)                    â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  LLM: Claude API (anthropic) / DeepSeek API                 â”‚   â”‚
â”‚  â”‚  è¯­éŸ³è½¬æ–‡å­—: Whisper                                         â”‚   â”‚
â”‚  â”‚  PDFè§£æ: Doc2X / Nougat                                    â”‚   â”‚
â”‚  â”‚  Embedding: text-embedding-3 / bge-large-zh                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 Pythonåç«¯æŠ€æœ¯é€‰å‹è¯¦è§£

| ç»„ä»¶ | é€‰å‹ | ç‰ˆæœ¬ | é€‰å‹ç†ç”± |
|------|------|------|----------|
| **Webæ¡†æ¶** | FastAPI | 0.109+ | å¼‚æ­¥æ”¯æŒã€è‡ªåŠ¨æ–‡æ¡£ã€ç±»å‹æç¤ºã€é«˜æ€§èƒ½ |
| **ASGIæœåŠ¡å™¨** | Uvicorn | 0.27+ | ç”Ÿäº§çº§ASGIæœåŠ¡å™¨ï¼Œæ”¯æŒHTTP/2 |
| **æ•°æ®éªŒè¯** | Pydantic | 2.6+ | å¼ºç±»å‹éªŒè¯ï¼Œä¸FastAPIæ·±åº¦é›†æˆ |
| **MySQL ORM** | SQLAlchemy | 2.0+ | æˆç†Ÿç¨³å®šï¼Œæ”¯æŒå¼‚æ­¥(asyncio) |
| **MongoDB ODM** | Beanie | 1.25+ | åŸºäºPydanticçš„MongoDB ODM |
| **å¼‚æ­¥MySQL** | aiomysql | 0.2+ | MySQLå¼‚æ­¥é©±åŠ¨ |
| **å¼‚æ­¥MongoDB** | Motor | 3.3+ | MongoDBå®˜æ–¹å¼‚æ­¥é©±åŠ¨ |
| **ç¼“å­˜å®¢æˆ·ç«¯** | redis-py | 5.0+ | Rediså®˜æ–¹Pythonå®¢æˆ·ç«¯ |
| **ä»»åŠ¡é˜Ÿåˆ—** | Celery | 5.3+ | åˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ— |
| **JWTè®¤è¯** | python-jose | 3.3+ | JWTç”Ÿæˆä¸éªŒè¯ |
| **å¯†ç å“ˆå¸Œ** | passlib | 1.7+ | å®‰å…¨çš„å¯†ç å“ˆå¸Œ(bcrypt) |
| **HTTPå®¢æˆ·ç«¯** | httpx | 0.26+ | å¼‚æ­¥HTTPå®¢æˆ·ç«¯ |
| **æ—¥å¿—** | loguru | 0.7+ | ç®€æ´å¼ºå¤§çš„æ—¥å¿—åº“ |
| **AI SDK** | anthropic | 0.18+ | Claudeå®˜æ–¹SDK |
| **å¯¹è±¡å­˜å‚¨** | minio | 7.2+ | MinIO Python SDK |

### 2.3 ç³»ç»Ÿæ¶æ„å›¾

```
                                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                     â”‚   ç”¨æˆ·æµè§ˆå™¨     â”‚
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚ HTTPS
                                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                                     â”‚      Nginx      â”‚
                                     â”‚  (åå‘ä»£ç†/SSL)  â”‚
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚                 â”‚                 â”‚
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚  å‰ç«¯é™æ€èµ„æº    â”‚ â”‚  FastAPI  â”‚ â”‚    WebSocket    â”‚
                   â”‚  (uipro build)  â”‚ â”‚  APIæœåŠ¡   â”‚ â”‚   (AIæµå¼å“åº”)   â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                        â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚   Celery Worker â”‚     â”‚   Redis Broker   â”‚
           â”‚   (å¼‚æ­¥ä»»åŠ¡)     â”‚â—„â”€â”€â”€â”€â”‚   (æ¶ˆæ¯é˜Ÿåˆ—)      â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚               â”‚               â”‚               â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”      â”Œâ”€â”€â”€â–¼â”€â”€â”€â”      â”Œâ”€â”€â”€â–¼â”€â”€â”€â”      â”Œâ”€â”€â”€â–¼â”€â”€â”€â”
â”‚ MySQL â”‚      â”‚MongoDBâ”‚      â”‚ MinIO â”‚      â”‚Milvus â”‚
â”‚(ç»“æ„åŒ–)â”‚      â”‚(æ–‡æ¡£) â”‚      â”‚(æ–‡ä»¶) â”‚      â”‚(å‘é‡) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. å¼€å‘ç¯å¢ƒé…ç½®

### 3.1 ç¯å¢ƒè¦æ±‚

```yaml
æ“ä½œç³»ç»Ÿ: macOS / Linux / Windows (WSL2æ¨è)

å¿…éœ€è½¯ä»¶:
  Python: 3.11+ (æ¨è3.12)
  Node.js: 18+ (ç”¨äºuiproå‰ç«¯)
  Docker: 24+
  Docker Compose: 2.20+
  Git: 2.40+

å¯é€‰è½¯ä»¶:
  PyCharm / VSCode (æ¨èå®‰è£…Pythonæ’ä»¶)
  DBeaver / Navicat (æ•°æ®åº“ç®¡ç†)
  Postman / Insomnia (APIæµ‹è¯•)
```

### 3.2 æœ¬åœ°ç¯å¢ƒæ­å»ºæ­¥éª¤

#### æ­¥éª¤1: å…‹éš†é¡¹ç›®å¹¶åˆå§‹åŒ–Git

```bash
# å…‹éš†é¡¹ç›®ï¼ˆæˆ–åˆ›å»ºæ–°é¡¹ç›®ï¼‰
git clone <repository-url>
cd acm-learning-platform

# å¦‚æœæ˜¯æ–°é¡¹ç›®ï¼Œåˆå§‹åŒ–Git
git init
git remote add origin <repository-url>

# ç¡®è®¤Gitæ­£å¸¸å·¥ä½œ
git status
git branch -a

# åˆ›å»ºå¹¶åˆ‡æ¢åˆ°Devåˆ†æ”¯è¿›è¡Œå¼€å‘
git checkout -b dev
git push -u origin dev
```

#### æ­¥éª¤2: å¯åŠ¨åŸºç¡€æœåŠ¡ï¼ˆDockerï¼‰

```bash
# åˆ›å»ºDockerç½‘ç»œ
docker network create acm-network

# å¯åŠ¨ MySQL + MongoDB + Redis + MinIO
docker-compose -f docker/docker-compose.dev.yml up -d

# éªŒè¯æœåŠ¡çŠ¶æ€
docker-compose -f docker/docker-compose.dev.yml ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose -f docker/docker-compose.dev.yml logs -f

# æœåŠ¡è®¿é—®åœ°å€:
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ æœåŠ¡       â”‚ åœ°å€                 â”‚ é»˜è®¤å‡­è¯          â”‚
# â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
# â”‚ MySQL      â”‚ localhost:3306      â”‚ root / root123   â”‚
# â”‚ MongoDB    â”‚ localhost:27017     â”‚ æ— è®¤è¯           â”‚
# â”‚ Redis      â”‚ localhost:6379      â”‚ æ— å¯†ç            â”‚
# â”‚ MinIO API  â”‚ localhost:9000      â”‚ minioadmin       â”‚
# â”‚ MinIO Web  â”‚ localhost:9001      â”‚ minioadmin       â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ­¥éª¤3: é…ç½®Pythonåç«¯ç¯å¢ƒ

```bash
# è¿›å…¥åç«¯ç›®å½•
cd backend

# åˆ›å»ºPythonè™šæ‹Ÿç¯å¢ƒ
python3.11 -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# macOS/Linux:
source venv/bin/activate
# Windows:
# venv\Scripts\activate

# å‡çº§pip
pip install --upgrade pip

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å®‰è£…å¼€å‘ä¾èµ–
pip install -r requirements-dev.txt

# å¤åˆ¶ç¯å¢ƒå˜é‡é…ç½®
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥å®é™…é…ç½®
# vim .env æˆ–ä½¿ç”¨ç¼–è¾‘å™¨æ‰“å¼€

# åˆå§‹åŒ–æ•°æ®åº“ï¼ˆMySQLè¡¨ç»“æ„ï¼‰
python scripts/init_db.py

# åˆå§‹åŒ–MongoDBç´¢å¼•
python scripts/init_mongo.py

# åŠ è½½çŸ¥è¯†å›¾è°±éª¨æ¶æ•°æ®
python scripts/load_knowledge_skeleton.py

# å¯åŠ¨åç«¯æœåŠ¡
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000

# éªŒè¯æœåŠ¡
# APIæ–‡æ¡£: http://localhost:8000/docs
# å¥åº·æ£€æŸ¥: http://localhost:8000/health
```

#### æ­¥éª¤4: é…ç½®å‰ç«¯ç¯å¢ƒï¼ˆuiproï¼‰

```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# ç¡®ä¿å·²å…¨å±€å®‰è£…uipro CLI
npm install -g @aspect/uipro-cli

# éªŒè¯å®‰è£…
uipro --version

# åˆå§‹åŒ–uiproé¡¹ç›®ï¼ˆå¦‚æœæ˜¯æ–°é¡¹ç›®ï¼‰
uipro init --ai claude

# å®‰è£…ä¾èµ–
npm install

# å¤åˆ¶ç¯å¢ƒå˜é‡
cp .env.example .env.local

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼‰
npm run dev

# å‰ç«¯è®¿é—®: http://localhost:3000
```

### 3.3 ç¯å¢ƒå˜é‡é…ç½®è¯¦è§£

```bash
# backend/.env

# ==================== åº”ç”¨é…ç½® ====================
APP_NAME=acm-learning-platform
APP_ENV=development                    # development / production
APP_DEBUG=true
APP_SECRET_KEY=your-super-secret-key-change-in-production
APP_API_PREFIX=/api/v1

# ==================== MySQLé…ç½® ====================
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_USER=root
MYSQL_PASSWORD=root123
MYSQL_DATABASE=acm_platform
MYSQL_POOL_SIZE=10
MYSQL_MAX_OVERFLOW=20

# ==================== MongoDBé…ç½® ====================
MONGODB_HOST=localhost
MONGODB_PORT=27017
MONGODB_DATABASE=acm_platform
MONGODB_USER=
MONGODB_PASSWORD=
# å®Œæ•´URIæ ¼å¼(å¯é€‰): mongodb://localhost:27017/acm_platform
MONGODB_URI=

# ==================== Redisé…ç½® ====================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_POOL_SIZE=10

# ==================== MinIOé…ç½® ====================
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET=acm-platform
MINIO_SECURE=false                     # true for HTTPS

# ==================== AIæœåŠ¡é…ç½® ====================
# Claude API
CLAUDE_API_KEY=sk-ant-api-xxxxx
CLAUDE_MODEL=claude-3-sonnet-20240229
CLAUDE_MAX_TOKENS=4096

# DeepSeek API (å¤‡é€‰)
DEEPSEEK_API_KEY=sk-xxxxx
DEEPSEEK_MODEL=deepseek-chat
DEEPSEEK_BASE_URL=https://api.deepseek.com

# ==================== JWTé…ç½® ====================
JWT_SECRET_KEY=your-jwt-secret-key
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# ==================== Celeryé…ç½® ====================
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2

# ==================== æ—¥å¿—é…ç½® ====================
LOG_LEVEL=DEBUG                        # DEBUG / INFO / WARNING / ERROR
LOG_PATH=./logs
LOG_ROTATION=00:00                     # æ¯å¤©è½®è½¬
LOG_RETENTION=30 days

# ==================== å‘é‡æ•°æ®åº“é…ç½® ====================
VECTOR_DB_TYPE=chromadb                # chromadb / milvus
CHROMADB_PATH=./data/chromadb
# Milvusé…ç½®ï¼ˆå¦‚æœä½¿ç”¨Milvusï¼‰
MILVUS_HOST=localhost
MILVUS_PORT=19530
```

### 3.4 Docker Composeé…ç½®

```yaml
# docker/docker-compose.dev.yml
version: '3.8'

services:
  # ==================== MySQL ====================
  mysql:
    image: mysql:8.0
    container_name: acm-mysql
    restart: unless-stopped
    environment:
      MYSQL_ROOT_PASSWORD: root123
      MYSQL_DATABASE: acm_platform
      MYSQL_CHARSET: utf8mb4
      MYSQL_COLLATION: utf8mb4_unicode_ci
    ports:
      - "3306:3306"
    volumes:
      - mysql_data:/var/lib/mysql
      - ./init-mysql:/docker-entrypoint-initdb.d
    command: >
      --character-set-server=utf8mb4
      --collation-server=utf8mb4_unicode_ci
      --default-authentication-plugin=mysql_native_password
    healthcheck:
      test: ["CMD", "mysqladmin", "ping", "-h", "localhost"]
      interval: 10s
      timeout: 5s
      retries: 5
    networks:
      - acm-network

  # ==================== MongoDB ====================
  mongodb:
    image: mongo:6.0
    container_name: acm-mongodb
    restart: unless-stopped
    ports:
      - "27017:27017"
    volumes:
      - mongodb_data:/data/db
      - mongodb_config:/data/configdb
    environment:
      MONGO_INITDB_DATABASE: acm_platform
    healthcheck:
      test: ["CMD", "mongosh", "--eval", "db.adminCommand('ping')"]
      interval: 10s
      timeout: 5s
      retries: 5
    networks:
      - acm-network

  # ==================== Redis ====================
  redis:
    image: redis:7-alpine
    container_name: acm-redis
    restart: unless-stopped
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    command: redis-server --appendonly yes
    healthcheck:
      test: ["CMD", "redis-cli", "ping"]
      interval: 10s
      timeout: 5s
      retries: 5
    networks:
      - acm-network

  # ==================== MinIO ====================
  minio:
    image: minio/minio:latest
    container_name: acm-minio
    restart: unless-stopped
    ports:
      - "9000:9000"   # APIç«¯å£
      - "9001:9001"   # Webæ§åˆ¶å°
    environment:
      MINIO_ROOT_USER: minioadmin
      MINIO_ROOT_PASSWORD: minioadmin
    volumes:
      - minio_data:/data
    command: server /data --console-address ":9001"
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:9000/minio/health/live"]
      interval: 30s
      timeout: 20s
      retries: 3
    networks:
      - acm-network

  # ==================== ChromaDB (å‘é‡æ•°æ®åº“) ====================
  chromadb:
    image: chromadb/chroma:latest
    container_name: acm-chromadb
    restart: unless-stopped
    ports:
      - "8001:8000"
    volumes:
      - chromadb_data:/chroma/chroma
    environment:
      - IS_PERSISTENT=TRUE
      - ANONYMIZED_TELEMETRY=FALSE
    networks:
      - acm-network

volumes:
  mysql_data:
  mongodb_data:
  mongodb_config:
  redis_data:
  minio_data:
  chromadb_data:

networks:
  acm-network:
    external: true
```

---

## 4. é¡¹ç›®ç›®å½•ç»“æ„

```
acm-learning-platform/
â”‚
â”œâ”€â”€ .git/                              # Gitç‰ˆæœ¬æ§åˆ¶
â”œâ”€â”€ .gitignore                         # Gitå¿½ç•¥é…ç½®
â”œâ”€â”€ README.md                          # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ CLAUDE.md                          # Claude Codeé…ç½®æ–‡ä»¶
â”œâ”€â”€ CHANGELOG.md                       # å˜æ›´æ—¥å¿—
â”‚
â”œâ”€â”€ docs/                              # ğŸ“š é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ PRD-V4.md                      # äº§å“éœ€æ±‚æ–‡æ¡£
â”‚   â”œâ”€â”€ API.md                         # APIæ¥å£æ–‡æ¡£
â”‚   â”œâ”€â”€ DATABASE.md                    # æ•°æ®åº“è®¾è®¡æ–‡æ¡£
â”‚   â”œâ”€â”€ DEPLOYMENT.md                  # éƒ¨ç½²æ–‡æ¡£
â”‚   â”œâ”€â”€ ARCHITECTURE.md                # æ¶æ„è®¾è®¡æ–‡æ¡£
â”‚   â””â”€â”€ images/                        # æ–‡æ¡£å›¾ç‰‡
â”‚       â”œâ”€â”€ architecture.png
â”‚       â”œâ”€â”€ er-diagram.png
â”‚       â””â”€â”€ flow-charts/
â”‚
â”œâ”€â”€ backend/                           # ğŸ åç«¯æœåŠ¡ (Python/FastAPI)
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ main.py                    # FastAPIåº”ç”¨å…¥å£
â”‚   â”‚   â”œâ”€â”€ config.py                  # é…ç½®ç®¡ç†(Pydantic Settings)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ api/                       # ğŸ”Œ APIè·¯ç”±å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ deps.py                # ä¾èµ–æ³¨å…¥(è®¤è¯ã€æ•°æ®åº“ä¼šè¯ç­‰)
â”‚   â”‚   â”‚   â””â”€â”€ v1/
â”‚   â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚       â”œâ”€â”€ router.py          # è·¯ç”±æ±‡æ€»
â”‚   â”‚   â”‚       â”œâ”€â”€ endpoints/
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ user.py        # ç”¨æˆ·æ¥å£
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ auth.py        # è®¤è¯æ¥å£
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ note.py        # ç¬”è®°æ¥å£
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ topic.py       # çŸ¥è¯†ç‚¹æ¥å£
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ point.py       # ç§¯åˆ†æ¥å£
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ coach.py       # AIæ•™ç»ƒæ¥å£
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ resource.py    # èµ„æºæ¥å£
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ admin.py       # ç®¡ç†æ¥å£
â”‚   â”‚   â”‚       â””â”€â”€ schemas/           # è¯·æ±‚/å“åº”æ¨¡å¼
â”‚   â”‚   â”‚           â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚           â”œâ”€â”€ user.py
â”‚   â”‚   â”‚           â”œâ”€â”€ note.py
â”‚   â”‚   â”‚           â”œâ”€â”€ topic.py
â”‚   â”‚   â”‚           â”œâ”€â”€ point.py
â”‚   â”‚   â”‚           â””â”€â”€ common.py      # é€šç”¨æ¨¡å¼(åˆ†é¡µã€å“åº”ç­‰)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ core/                      # ğŸ”§ æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ security.py            # JWTè®¤è¯ã€å¯†ç å“ˆå¸Œ
â”‚   â”‚   â”‚   â”œâ”€â”€ exceptions.py          # è‡ªå®šä¹‰å¼‚å¸¸
â”‚   â”‚   â”‚   â”œâ”€â”€ response.py            # ç»Ÿä¸€å“åº”æ ¼å¼
â”‚   â”‚   â”‚   â””â”€â”€ logging.py             # æ—¥å¿—é…ç½®
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ models/                    # ğŸ“Š æ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ mysql/                 # MySQLæ¨¡å‹ (SQLAlchemy)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ base.py            # åŸºç±»ã€å¼•æ“é…ç½®
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user.py            # ç”¨æˆ·æ¨¡å‹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ point.py           # ç§¯åˆ†æ¨¡å‹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ order.py           # è®¢å•æ¨¡å‹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ topic.py           # çŸ¥è¯†ç‚¹æ¨¡å‹
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ resource.py        # èµ„æºæ¨¡å‹
â”‚   â”‚   â”‚   â””â”€â”€ mongo/                 # MongoDBæ¨¡å‹ (Beanie)
â”‚   â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚       â”œâ”€â”€ note.py            # ç¬”è®°æ–‡æ¡£
â”‚   â”‚   â”‚       â”œâ”€â”€ chat.py            # å¯¹è¯æ–‡æ¡£
â”‚   â”‚   â”‚       â”œâ”€â”€ fragment.py        # å†…å®¹ç‰‡æ®µ
â”‚   â”‚   â”‚       â””â”€â”€ log.py             # æ—¥å¿—æ–‡æ¡£
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ services/                  # ğŸ’¼ ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ user_service.py
â”‚   â”‚   â”‚   â”œâ”€â”€ auth_service.py
â”‚   â”‚   â”‚   â”œâ”€â”€ note_service.py
â”‚   â”‚   â”‚   â”œâ”€â”€ topic_service.py
â”‚   â”‚   â”‚   â”œâ”€â”€ point_service.py
â”‚   â”‚   â”‚   â”œâ”€â”€ coach_service.py
â”‚   â”‚   â”‚   â”œâ”€â”€ resource_service.py
â”‚   â”‚   â”‚   â””â”€â”€ note_generation_service.py  # ç¬”è®°ç”Ÿæˆå¼•æ“
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ repositories/              # ğŸ“ æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ mysql/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ base_repo.py       # é€šç”¨CRUD
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user_repo.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ point_repo.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ topic_repo.py
â”‚   â”‚   â”‚   â””â”€â”€ mongo/
â”‚   â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚       â”œâ”€â”€ note_repo.py
â”‚   â”‚   â”‚       â””â”€â”€ chat_repo.py
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ infrastructure/            # ğŸ—ï¸ åŸºç¡€è®¾æ–½
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ mysql.py           # MySQLè¿æ¥æ± 
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ mongo.py           # MongoDBè¿æ¥
â”‚   â”‚   â”‚   â”œâ”€â”€ cache/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ redis.py           # Rediså®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ storage/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ minio_client.py    # MinIOå®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ ai/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ claude_client.py   # Claude APIå°è£…
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ deepseek_client.py # DeepSeek APIå°è£…
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ embedding.py       # EmbeddingæœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ vector/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ chromadb_client.py # å‘é‡æ•°æ®åº“å®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â””â”€â”€ pdf/
â”‚   â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚       â””â”€â”€ parser.py          # PDFè§£ææœåŠ¡
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ tasks/                     # â° å¼‚æ­¥ä»»åŠ¡ (Celery)
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ celery_app.py          # Celeryé…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ note_tasks.py          # ç¬”è®°ç”Ÿæˆä»»åŠ¡
â”‚   â”‚   â”‚   â””â”€â”€ resource_tasks.py      # èµ„æºå¤„ç†ä»»åŠ¡
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ prompts/                   # ğŸ¤– AI Promptæ¨¡æ¿
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ note_generation.py     # ç¬”è®°ç”ŸæˆPrompt
â”‚   â”‚       â”œâ”€â”€ coach_chat.py          # AIæ•™ç»ƒPrompt
â”‚   â”‚       â””â”€â”€ assessment.py          # èƒ½åŠ›è¯„ä¼°Prompt
â”‚   â”‚
â”‚   â”œâ”€â”€ tests/                         # ğŸ§ª å•å…ƒæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ conftest.py                # pytesté…ç½®å’Œfixtures
â”‚   â”‚   â”œâ”€â”€ test_api/
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ test_user.py
â”‚   â”‚   â”‚   â”œâ”€â”€ test_note.py
â”‚   â”‚   â”‚   â””â”€â”€ test_topic.py
â”‚   â”‚   â”œâ”€â”€ test_services/
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ test_user_service.py
â”‚   â”‚   â”‚   â”œâ”€â”€ test_note_service.py
â”‚   â”‚   â”‚   â”œâ”€â”€ test_point_service.py
â”‚   â”‚   â”‚   â””â”€â”€ test_coach_service.py
â”‚   â”‚   â””â”€â”€ test_repositories/
â”‚   â”‚       â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ scripts/                       # ğŸ”§ è„šæœ¬å·¥å…·
â”‚   â”‚   â”œâ”€â”€ init_db.py                 # MySQLåˆå§‹åŒ–
â”‚   â”‚   â”œâ”€â”€ init_mongo.py              # MongoDBåˆå§‹åŒ–
â”‚   â”‚   â”œâ”€â”€ load_knowledge_skeleton.py # åŠ è½½çŸ¥è¯†å›¾è°±
â”‚   â”‚   â”œâ”€â”€ seed_data.py               # å¡«å……æµ‹è¯•æ•°æ®
â”‚   â”‚   â””â”€â”€ create_admin.py            # åˆ›å»ºç®¡ç†å‘˜
â”‚   â”‚
â”‚   â”œâ”€â”€ alembic/                       # ğŸ“¦ æ•°æ®åº“è¿ç§»
â”‚   â”‚   â”œâ”€â”€ versions/                  # è¿ç§»ç‰ˆæœ¬
â”‚   â”‚   â”œâ”€â”€ env.py
â”‚   â”‚   â””â”€â”€ script.py.mako
â”‚   â”‚
â”‚   â”œâ”€â”€ logs/                          # ğŸ“ æ—¥å¿—ç›®å½•
â”‚   â”‚   â”œâ”€â”€ .gitkeep
â”‚   â”‚   â”œâ”€â”€ app.log
â”‚   â”‚   â”œâ”€â”€ error.log
â”‚   â”‚   â””â”€â”€ access.log
â”‚   â”‚
â”‚   â”œâ”€â”€ data/                          # ğŸ“‚ æœ¬åœ°æ•°æ®ç›®å½•
â”‚   â”‚   â””â”€â”€ chromadb/                  # ChromaDBæŒä¹…åŒ–
â”‚   â”‚
â”‚   â”œâ”€â”€ requirements.txt               # ç”Ÿäº§ä¾èµ–
â”‚   â”œâ”€â”€ requirements-dev.txt           # å¼€å‘ä¾èµ–
â”‚   â”œâ”€â”€ pytest.ini                     # pytesté…ç½®
â”‚   â”œâ”€â”€ alembic.ini                    # Alembicé…ç½®
â”‚   â”œâ”€â”€ .env.example                   # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”‚   â””â”€â”€ README.md                      # åç«¯è¯´æ˜
â”‚
â”œâ”€â”€ frontend/                          # ğŸ¨ å‰ç«¯åº”ç”¨ (uipro)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.ts                    # å…¥å£æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ App.vue                    # æ ¹ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ uipro.config.ts            # uiproé…ç½®
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ api/                       # APIè¯·æ±‚å°è£…
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts               # APIç»Ÿä¸€å¯¼å‡º
â”‚   â”‚   â”‚   â”œâ”€â”€ request.ts             # Axioså°è£…
â”‚   â”‚   â”‚   â”œâ”€â”€ user.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ note.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ topic.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ point.ts
â”‚   â”‚   â”‚   â””â”€â”€ coach.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ components/                # ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ common/                # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AppHeader.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AppSidebar.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AppFooter.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ThemeToggle.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ note/                  # ç¬”è®°ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ NoteCard.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ NoteContent.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ NoteLayerTabs.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ MarkdownRenderer.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ topic/                 # çŸ¥è¯†ç‚¹ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ TopicTree.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ TopicGraph.vue
â”‚   â”‚   â”‚   â””â”€â”€ coach/                 # AIæ•™ç»ƒç»„ä»¶
â”‚   â”‚   â”‚       â”œâ”€â”€ ChatWindow.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ MessageItem.vue
â”‚   â”‚   â”‚       â””â”€â”€ SessionList.vue
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ layouts/                   # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ DefaultLayout.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ AuthLayout.vue
â”‚   â”‚   â”‚   â””â”€â”€ AdminLayout.vue
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ pages/                     # é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ index.vue              # é¦–é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ user/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ login.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ register.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ profile.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ note/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.vue          # ç¬”è®°åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ [id].vue           # ç¬”è®°è¯¦æƒ…
â”‚   â”‚   â”‚   â”œâ”€â”€ topic/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.vue          # çŸ¥è¯†å›¾è°±
â”‚   â”‚   â”‚   â”œâ”€â”€ coach/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.vue          # AIæ•™ç»ƒ
â”‚   â”‚   â”‚   â”œâ”€â”€ point/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.vue          # ç§¯åˆ†ä¸­å¿ƒ
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ recharge.vue       # å……å€¼
â”‚   â”‚   â”‚   â””â”€â”€ admin/                 # ç®¡ç†åå°
â”‚   â”‚   â”‚       â”œâ”€â”€ index.vue          # Dashboard
â”‚   â”‚   â”‚       â”œâ”€â”€ resources.vue      # èµ„æºç®¡ç†
â”‚   â”‚   â”‚       â”œâ”€â”€ notes.vue          # ç¬”è®°å®¡æ ¸
â”‚   â”‚   â”‚       â”œâ”€â”€ pdf-review.vue     # PDFæ ¡å¯¹å™¨
â”‚   â”‚   â”‚       â””â”€â”€ users.vue          # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ stores/                    # çŠ¶æ€ç®¡ç† (Pinia)
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ user.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ note.ts
â”‚   â”‚   â”‚   â””â”€â”€ coach.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ router/                    # è·¯ç”±é…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ composables/               # ç»„åˆå¼å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ useAuth.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useTheme.ts
â”‚   â”‚   â”‚   â””â”€â”€ useNotification.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ utils/                     # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ format.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ storage.ts
â”‚   â”‚   â”‚   â””â”€â”€ constants.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ types/                     # TypeScriptç±»å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ user.d.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ note.d.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ topic.d.ts
â”‚   â”‚   â”‚   â””â”€â”€ api.d.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ styles/                    # å…¨å±€æ ·å¼
â”‚   â”‚       â””â”€â”€ global.css
â”‚   â”‚
â”‚   â”œâ”€â”€ public/                        # é™æ€èµ„æº
â”‚   â”‚   â”œâ”€â”€ favicon.ico
â”‚   â”‚   â””â”€â”€ images/
â”‚   â”‚
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ vite.config.ts
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â”œâ”€â”€ tailwind.config.js
â”‚   â”œâ”€â”€ .env.example
â”‚   â””â”€â”€ README.md                      # å‰ç«¯è¯´æ˜
â”‚
â”œâ”€â”€ landing-page/                      # ğŸŒ å®£ä¼ é¡µé¢
â”‚   â”œâ”€â”€ index.html                     # å•é¡µå®£ä¼ ç«™ç‚¹
â”‚   â””â”€â”€ assets/                        # é™æ€èµ„æº
â”‚       â”œâ”€â”€ images/
â”‚       â””â”€â”€ styles/
â”‚
â”œâ”€â”€ docker/                            # ğŸ³ Dockeré…ç½®
â”‚   â”œâ”€â”€ docker-compose.yml             # ç”Ÿäº§ç¯å¢ƒ
â”‚   â”œâ”€â”€ docker-compose.dev.yml         # å¼€å‘ç¯å¢ƒ
â”‚   â”œâ”€â”€ Dockerfile.backend             # åç«¯é•œåƒ
â”‚   â”œâ”€â”€ Dockerfile.frontend            # å‰ç«¯é•œåƒ
â”‚   â”œâ”€â”€ nginx/
â”‚   â”‚   â””â”€â”€ nginx.conf                 # Nginxé…ç½®
â”‚   â””â”€â”€ init-mysql/
â”‚       â””â”€â”€ 01-init.sql                # MySQLåˆå§‹åŒ–è„šæœ¬
â”‚
â”œâ”€â”€ scripts/                           # ğŸ”§ é¡¹ç›®çº§è„šæœ¬
â”‚   â”œâ”€â”€ setup.sh                       # ç¯å¢ƒåˆå§‹åŒ–
â”‚   â”œâ”€â”€ dev.sh                         # å¯åŠ¨å¼€å‘ç¯å¢ƒ
â”‚   â”œâ”€â”€ test.sh                        # è¿è¡Œæµ‹è¯•
â”‚   â””â”€â”€ deploy.sh                      # éƒ¨ç½²è„šæœ¬
â”‚
â””â”€â”€ knowledge-skeleton/                # ğŸ“Š çŸ¥è¯†å›¾è°±éª¨æ¶
    â”œâ”€â”€ knowledge-graph.yaml           # çŸ¥è¯†ç»“æ„å®šä¹‰
    â””â”€â”€ README.md                      # éª¨æ¶ç»´æŠ¤è¯´æ˜
```

---

## 5. Gitç‰ˆæœ¬æ§åˆ¶è§„èŒƒ

### 5.1 åˆ†æ”¯ç­–ç•¥

æœ¬é¡¹ç›®é‡‡ç”¨**ç®€åŒ–åŒåˆ†æ”¯ç­–ç•¥**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Gitåˆ†æ”¯ç­–ç•¥                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚                         â”‚   master    â”‚  â† ç¨³å®šç‰ˆæœ¬ï¼Œå¯éšæ—¶éƒ¨ç½²      â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                                â”‚                                    â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                    â”‚                       â”‚                        â”‚
â”‚              (åˆå¹¶å‘å¸ƒ)               (åˆ›å»ºåˆ†æ”¯)                     â”‚
â”‚                    â”‚                       â”‚                        â”‚
â”‚                    â–¼                       â–¼                        â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚              â”‚              dev                â”‚  â† æ—¥å¸¸å¼€å‘åˆ†æ”¯     â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                    â”‚                                                â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚         â–¼         â–¼         â–¼         â–¼                            â”‚
â”‚     [å¼€å‘ä»»åŠ¡1] [å¼€å‘ä»»åŠ¡2] [å¼€å‘ä»»åŠ¡3] [...]                        â”‚
â”‚                                                                     â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                     â”‚
â”‚  åˆ†æ”¯è¯´æ˜:                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  master  â”‚ â€¢ ç¨³å®šç‰ˆæœ¬åˆ†æ”¯                                      â”‚ â”‚
â”‚  â”‚          â”‚ â€¢ ç¦æ­¢ç›´æ¥pushï¼Œåªèƒ½é€šè¿‡åˆå¹¶dev                     â”‚ â”‚
â”‚  â”‚          â”‚ â€¢ æ¯æ¬¡åˆå¹¶æ‰“Tag                                     â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚   dev    â”‚ â€¢ å¼€å‘åˆ†æ”¯ï¼Œæ‰€æœ‰åŠŸèƒ½åœ¨æ­¤å¼€å‘                        â”‚ â”‚
â”‚  â”‚          â”‚ â€¢ åŠŸèƒ½ç¨³å®šååˆå¹¶åˆ°master                            â”‚ â”‚
â”‚  â”‚          â”‚ â€¢ æ¥å—ç›´æ¥push                                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 åˆ†æ”¯æ“ä½œå‘½ä»¤

```bash
# ==================== æ—¥å¸¸å¼€å‘æµç¨‹ ====================

# 1. åˆ‡æ¢åˆ°devåˆ†æ”¯
git checkout dev

# 2. æ‹‰å–æœ€æ–°ä»£ç 
git pull origin dev

# 3. è¿›è¡Œå¼€å‘...

# 4. æäº¤ä»£ç 
git add .
git commit -m "feat(user): å®ç°ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½"
git push origin dev

# ==================== ç‰ˆæœ¬å‘å¸ƒæµç¨‹ ====================

# 1. ç¡®ä¿devåˆ†æ”¯æµ‹è¯•é€šè¿‡
cd backend && pytest tests/ -v

# 2. åˆ‡æ¢åˆ°masteråˆ†æ”¯
git checkout master

# 3. åˆå¹¶devåˆ†æ”¯
git merge dev

# 4. æ¨é€åˆ°è¿œç¨‹
git push origin master

# 5. æ‰“ç‰ˆæœ¬æ ‡ç­¾
git tag -a v1.0.0 -m "Release v1.0.0 - é¦–ä¸ªæ­£å¼ç‰ˆæœ¬"
git push origin v1.0.0

# 6. åˆ‡å›devç»§ç»­å¼€å‘
git checkout dev
```

### 5.3 æäº¤ä¿¡æ¯è§„èŒƒ

#### æ ¼å¼

```
<type>(<scope>): <subject>

<body>

<footer>
```

#### Typeç±»å‹

| Type | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `feat` | æ–°åŠŸèƒ½ | feat(user): æ·»åŠ ç”¨æˆ·æ³¨å†Œæ¥å£ |
| `fix` | Bugä¿®å¤ | fix(note): ä¿®å¤ç¬”è®°å†…å®¹æ¸²æŸ“é”™è¯¯ |
| `docs` | æ–‡æ¡£æ›´æ–° | docs(api): æ›´æ–°APIæ–‡æ¡£ |
| `style` | ä»£ç æ ¼å¼ | style: æ ¼å¼åŒ–ä»£ç  |
| `refactor` | é‡æ„ | refactor(service): é‡æ„ç”¨æˆ·æœåŠ¡ |
| `test` | æµ‹è¯• | test(user): æ·»åŠ ç”¨æˆ·æœåŠ¡å•å…ƒæµ‹è¯• |
| `chore` | æ„å»º/å·¥å…· | chore: æ›´æ–°ä¾èµ–ç‰ˆæœ¬ |
| `perf` | æ€§èƒ½ä¼˜åŒ– | perf(query): ä¼˜åŒ–ç¬”è®°æŸ¥è¯¢æ€§èƒ½ |

#### æäº¤ç¤ºä¾‹

```bash
# æ–°åŠŸèƒ½
git commit -m "feat(user): å®ç°ç”¨æˆ·æ³¨å†Œå’Œç™»å½•åŠŸèƒ½

- å®ç°é‚®ç®±æ³¨å†Œæ¥å£
- å®ç°JWTç™»å½•è®¤è¯
- æ·»åŠ å¯†ç BCryptåŠ å¯†
- ç¼–å†™å•å…ƒæµ‹è¯•(è¦†ç›–ç‡85%)

Closes #12"

# Bugä¿®å¤
git commit -m "fix(note): ä¿®å¤Markdownä¸­ä»£ç å—é«˜äº®å¤±æ•ˆ

é—®é¢˜åŸå› ï¼šhighlight.jsç‰ˆæœ¬ä¸å…¼å®¹
è§£å†³æ–¹æ¡ˆï¼šé”å®šç‰ˆæœ¬ä¸º11.9.0

Fixes #25"

# æµ‹è¯•
git commit -m "test(point): æ·»åŠ ç§¯åˆ†æœåŠ¡å•å…ƒæµ‹è¯•

- è¦†ç›–å……å€¼æˆåŠŸåœºæ™¯
- è¦†ç›–ä½™é¢ä¸è¶³åœºæ™¯
- è¦†ç›–å¹¶å‘æ‰£å‡åœºæ™¯
- è¦†ç›–ç‡ä»60%æå‡åˆ°88%"
```

### 5.4 å¼€å‘å·¥ä½œæµç¨‹ï¼ˆæ ¸å¿ƒâš ï¸ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       æ¨¡å—å¼€å‘å®Œæ•´æµç¨‹                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚
â”‚  â•‘  Step 1: ç¡®ä¿åœ¨devåˆ†æ”¯                                        â•‘ â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£ â”‚
â”‚  â•‘  $ git checkout dev                                           â•‘ â”‚
â”‚  â•‘  $ git pull origin dev                                        â•‘ â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                              â†“                                      â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚
â”‚  â•‘  Step 2: ç¼–å†™åŠŸèƒ½ä»£ç                                          â•‘ â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£ â”‚
â”‚  â•‘  - æŒ‰ç…§ç›®å½•ç»“æ„è§„èŒƒåˆ›å»ºæ–‡ä»¶                                   â•‘ â”‚
â”‚  â•‘  - éµå¾ªPythonä»£ç è§„èŒƒ(PEP 8)                                  â•‘ â”‚
â”‚  â•‘  - æ·»åŠ ç±»å‹æ³¨è§£(Type Hints)                                   â•‘ â”‚
â”‚  â•‘  - æ·»åŠ å¿…è¦çš„æ³¨é‡Šå’Œdocstring                                  â•‘ â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                              â†“                                      â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚
â”‚  â•‘  Step 3: ç¼–å†™å•å…ƒæµ‹è¯• âš ï¸ å¿…é¡»                                 â•‘ â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£ â”‚
â”‚  â•‘  - ä¸ºæ¯ä¸ªServiceç¼–å†™æµ‹è¯•ç±»                                    â•‘ â”‚
â”‚  â•‘  - è¦†ç›–æ­£å¸¸æµç¨‹å’Œå¼‚å¸¸æµç¨‹                                     â•‘ â”‚
â”‚  â•‘  - ç¡®ä¿æµ‹è¯•è¦†ç›–ç‡ > 80%                                       â•‘ â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                              â†“                                      â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚
â”‚  â•‘  Step 4: è¿è¡Œæµ‹è¯•éªŒè¯                                         â•‘ â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£ â”‚
â”‚  â•‘  $ cd backend                                                 â•‘ â”‚
â”‚  â•‘  $ pytest tests/ -v --cov=app --cov-report=term               â•‘ â”‚
â”‚  â•‘  # ç¡®ä¿: âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡  âœ… è¦†ç›–ç‡>80%                       â•‘ â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                              â†“                                      â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚
â”‚  â•‘  Step 5: å‰ç«¯å¼€å‘éªŒè¯ï¼ˆå¦‚æ¶‰åŠï¼‰                               â•‘ â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£ â”‚
â”‚  â•‘  $ cd frontend                                                â•‘ â”‚
â”‚  â•‘  $ npm run dev  # è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ http://localhost:3000        â•‘ â”‚
â”‚  â•‘  # éªŒè¯: âœ… é¡µé¢æ˜¾ç¤ºæ­£å¸¸  âœ… äº¤äº’åŠŸèƒ½æ­£å¸¸  âœ… æ·±è‰²æ¨¡å¼æ­£å¸¸    â•‘ â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                              â†“                                      â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚
â”‚  â•‘  Step 6: æäº¤ä»£ç åˆ°devåˆ†æ”¯                                    â•‘ â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£ â”‚
â”‚  â•‘  $ git add .                                                  â•‘ â”‚
â”‚  â•‘  $ git commit -m "feat(module): å®Œæˆxxxæ¨¡å—å¼€å‘               â•‘ â”‚
â”‚  â•‘                                                               â•‘ â”‚
â”‚  â•‘  - å®ç°xxxåŠŸèƒ½                                                â•‘ â”‚
â”‚  â•‘  - æ·»åŠ å•å…ƒæµ‹è¯•(è¦†ç›–ç‡85%)                                    â•‘ â”‚
â”‚  â•‘  - å‰ç«¯é¡µé¢éªŒè¯é€šè¿‡"                                          â•‘ â”‚
â”‚  â•‘  $ git push origin dev                                        â•‘ â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                              â†“                                      â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚
â”‚  â•‘  Step 7: ç‰ˆæœ¬å‘å¸ƒæ—¶åˆå¹¶åˆ°master                               â•‘ â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£ â”‚
â”‚  â•‘  $ git checkout master                                        â•‘ â”‚
â”‚  â•‘  $ git merge dev                                              â•‘ â”‚
â”‚  â•‘  $ git push origin master                                     â•‘ â”‚
â”‚  â•‘  $ git tag -a v1.x.x -m "Release v1.x.x"                     â•‘ â”‚
â”‚  â•‘  $ git push origin v1.x.x                                     â•‘ â”‚
â”‚  â•‘  $ git checkout dev  # åˆ‡å›devç»§ç»­å¼€å‘                        â•‘ â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.5 .gitignoreé…ç½®

```gitignore
# ==================== Python ====================
__pycache__/
*.py[cod]
*$py.class
*.so
.Python
build/
develop-eggs/
dist/
downloads/
eggs/
.eggs/
lib/
lib64/
parts/
sdist/
var/
wheels/
*.egg-info/
.installed.cfg
*.egg

# è™šæ‹Ÿç¯å¢ƒ
venv/
ENV/
env/
.venv/

# ==================== IDE ====================
.idea/
.vscode/
*.swp
*.swo
*.sublime-project
*.sublime-workspace

# ==================== ç¯å¢ƒå˜é‡ ====================
.env
.env.local
.env.*.local
!.env.example

# ==================== æ—¥å¿— ====================
logs/
*.log

# ==================== æµ‹è¯• ====================
.coverage
htmlcov/
.pytest_cache/
.tox/
.nox/

# ==================== Node.js ====================
node_modules/
.npm
.pnpm-store/

# ==================== æ„å»ºäº§ç‰© ====================
frontend/dist/
*.pyc

# ==================== æœ¬åœ°æ•°æ® ====================
backend/data/
*.db
*.sqlite3

# ==================== æ“ä½œç³»ç»Ÿ ====================
.DS_Store
.DS_Store?
._*
.Spotlight-V100
.Trashes
ehthumbs.db
Thumbs.db

# ==================== ä¸´æ—¶æ–‡ä»¶ ====================
*.tmp
*.temp
*.bak
```

---

## 6. Pythonåç«¯å¼€å‘è§„èŒƒ

### 6.1 ä¾èµ–ç®¡ç†

```txt
# backend/requirements.txt

# ==================== Webæ¡†æ¶ ====================
fastapi==0.109.2
uvicorn[standard]==0.27.1
python-multipart==0.0.9
starlette==0.36.3

# ==================== æ•°æ®éªŒè¯ ====================
pydantic==2.6.1
pydantic-settings==2.1.0
email-validator==2.1.0

# ==================== MySQL ====================
sqlalchemy==2.0.25
aiomysql==0.2.0
pymysql==1.1.0
alembic==1.13.1

# ==================== MongoDB ====================
motor==3.3.2
beanie==1.25.0

# ==================== Redis ====================
redis==5.0.1

# ==================== å¯¹è±¡å­˜å‚¨ ====================
minio==7.2.3

# ==================== è®¤è¯ ====================
python-jose[cryptography]==3.3.0
passlib[bcrypt]==1.7.4

# ==================== AIæœåŠ¡ ====================
anthropic==0.18.1
openai==1.12.0
tiktoken==0.6.0

# ==================== å‘é‡æ•°æ®åº“ ====================
chromadb==0.4.22

# ==================== å¼‚æ­¥ä»»åŠ¡ ====================
celery==5.3.6

# ==================== HTTPå®¢æˆ·ç«¯ ====================
httpx==0.26.0
aiohttp==3.9.3

# ==================== æ—¥å¿— ====================
loguru==0.7.2

# ==================== å·¥å…· ====================
python-dotenv==1.0.1
orjson==3.9.13
tenacity==8.2.3
```

```txt
# backend/requirements-dev.txt

# æµ‹è¯•
pytest==8.0.1
pytest-asyncio==0.23.5
pytest-cov==4.1.0
pytest-mock==3.12.0
httpx==0.26.0  # ç”¨äºæµ‹è¯•FastAPI

# ä»£ç è´¨é‡
black==24.2.0
isort==5.13.2
flake8==7.0.0
mypy==1.8.0

# å¼€å‘å·¥å…·
ipython==8.21.0
pre-commit==3.6.1
```

### 6.2 é¡¹ç›®é…ç½®

```python
# backend/app/config.py

from functools import lru_cache
from typing import Optional
from pydantic_settings import BaseSettings, SettingsConfigDict


class Settings(BaseSettings):
    """åº”ç”¨é…ç½®"""
    
    model_config = SettingsConfigDict(
        env_file=".env",
        env_file_encoding="utf-8",
        case_sensitive=False,
    )
    
    # åº”ç”¨é…ç½®
    app_name: str = "acm-learning-platform"
    app_env: str = "development"
    app_debug: bool = True
    app_secret_key: str
    app_api_prefix: str = "/api/v1"
    
    # MySQLé…ç½®
    mysql_host: str = "localhost"
    mysql_port: int = 3306
    mysql_user: str = "root"
    mysql_password: str
    mysql_database: str = "acm_platform"
    mysql_pool_size: int = 10
    mysql_max_overflow: int = 20
    
    @property
    def mysql_url(self) -> str:
        return f"mysql+aiomysql://{self.mysql_user}:{self.mysql_password}@{self.mysql_host}:{self.mysql_port}/{self.mysql_database}"
    
    @property
    def mysql_url_sync(self) -> str:
        return f"mysql+pymysql://{self.mysql_user}:{self.mysql_password}@{self.mysql_host}:{self.mysql_port}/{self.mysql_database}"
    
    # MongoDBé…ç½®
    mongodb_host: str = "localhost"
    mongodb_port: int = 27017
    mongodb_database: str = "acm_platform"
    mongodb_user: Optional[str] = None
    mongodb_password: Optional[str] = None
    mongodb_uri: Optional[str] = None
    
    @property
    def mongodb_url(self) -> str:
        if self.mongodb_uri:
            return self.mongodb_uri
        if self.mongodb_user and self.mongodb_password:
            return f"mongodb://{self.mongodb_user}:{self.mongodb_password}@{self.mongodb_host}:{self.mongodb_port}"
        return f"mongodb://{self.mongodb_host}:{self.mongodb_port}"
    
    # Redisé…ç½®
    redis_host: str = "localhost"
    redis_port: int = 6379
    redis_password: Optional[str] = None
    redis_db: int = 0
    redis_pool_size: int = 10
    
    @property
    def redis_url(self) -> str:
        password_part = f":{self.redis_password}@" if self.redis_password else ""
        return f"redis://{password_part}{self.redis_host}:{self.redis_port}/{self.redis_db}"
    
    # MinIOé…ç½®
    minio_endpoint: str = "localhost:9000"
    minio_access_key: str = "minioadmin"
    minio_secret_key: str = "minioadmin"
    minio_bucket: str = "acm-platform"
    minio_secure: bool = False
    
    # AIæœåŠ¡é…ç½®
    claude_api_key: Optional[str] = None
    claude_model: str = "claude-3-sonnet-20240229"
    claude_max_tokens: int = 4096
    
    deepseek_api_key: Optional[str] = None
    deepseek_model: str = "deepseek-chat"
    deepseek_base_url: str = "https://api.deepseek.com"
    
    # JWTé…ç½®
    jwt_secret_key: str
    jwt_algorithm: str = "HS256"
    jwt_access_token_expire_minutes: int = 60
    jwt_refresh_token_expire_days: int = 7
    
    # Celeryé…ç½®
    celery_broker_url: str = "redis://localhost:6379/1"
    celery_result_backend: str = "redis://localhost:6379/2"
    
    # æ—¥å¿—é…ç½®
    log_level: str = "DEBUG"
    log_path: str = "./logs"
    log_rotation: str = "00:00"
    log_retention: str = "30 days"


@lru_cache
def get_settings() -> Settings:
    """è·å–é…ç½®å•ä¾‹"""
    return Settings()


settings = get_settings()
```

### 6.3 FastAPIåº”ç”¨å…¥å£

```python
# backend/app/main.py

from contextlib import asynccontextmanager
from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware
from loguru import logger

from app.config import settings
from app.core.logging import setup_logging
from app.core.exceptions import setup_exception_handlers
from app.api.v1.router import api_router
from app.infrastructure.database.mysql import init_mysql, close_mysql
from app.infrastructure.database.mongo import init_mongo, close_mongo
from app.infrastructure.cache.redis import init_redis, close_redis


@asynccontextmanager
async def lifespan(app: FastAPI):
    """åº”ç”¨ç”Ÿå‘½å‘¨æœŸç®¡ç†"""
    # å¯åŠ¨æ—¶
    logger.info("ğŸš€ Starting ACM Learning Platform...")
    
    # åˆå§‹åŒ–æ—¥å¿—
    setup_logging()
    
    # åˆå§‹åŒ–æ•°æ®åº“è¿æ¥
    await init_mysql()
    await init_mongo()
    await init_redis()
    
    logger.info("âœ… All services initialized successfully")
    
    yield
    
    # å…³é—­æ—¶
    logger.info("ğŸ›‘ Shutting down...")
    
    await close_mysql()
    await close_mongo()
    await close_redis()
    
    logger.info("ğŸ‘‹ Goodbye!")


def create_app() -> FastAPI:
    """åˆ›å»ºFastAPIåº”ç”¨"""
    app = FastAPI(
        title="ACMç®—æ³•å­¦ä¹ å¹³å°",
        description="AIé©±åŠ¨çš„ä¸ªæ€§åŒ–ç®—æ³•å­¦ä¹ å¹³å°",
        version="1.0.0",
        docs_url="/docs",
        redoc_url="/redoc",
        openapi_url="/openapi.json",
        lifespan=lifespan,
    )
    
    # CORSé…ç½®
    app.add_middleware(
        CORSMiddleware,
        allow_origins=["*"] if settings.app_debug else ["https://yourdomain.com"],
        allow_credentials=True,
        allow_methods=["*"],
        allow_headers=["*"],
    )
    
    # æ³¨å†Œå¼‚å¸¸å¤„ç†å™¨
    setup_exception_handlers(app)
    
    # æ³¨å†Œè·¯ç”±
    app.include_router(api_router, prefix=settings.app_api_prefix)
    
    # å¥åº·æ£€æŸ¥ç«¯ç‚¹
    @app.get("/health", tags=["å¥åº·æ£€æŸ¥"])
    async def health_check():
        return {"status": "healthy", "service": settings.app_name}
    
    return app


app = create_app()


if __name__ == "__main__":
    import uvicorn
    uvicorn.run(
        "app.main:app",
        host="0.0.0.0",
        port=8000,
        reload=settings.app_debug,
    )
```

### 6.4 ç»Ÿä¸€å“åº”æ ¼å¼

```python
# backend/app/core/response.py

from typing import Any, Generic, Optional, TypeVar
from pydantic import BaseModel
from datetime import datetime

T = TypeVar("T")


class Response(BaseModel, Generic[T]):
    """ç»Ÿä¸€å“åº”æ ¼å¼"""
    
    code: int = 200
    message: str = "success"
    data: Optional[T] = None
    timestamp: int = None
    
    def __init__(self, **data):
        super().__init__(**data)
        if self.timestamp is None:
            self.timestamp = int(datetime.now().timestamp() * 1000)
    
    @classmethod
    def success(cls, data: Any = None, message: str = "success") -> "Response":
        """æˆåŠŸå“åº”"""
        return cls(code=200, message=message, data=data)
    
    @classmethod
    def fail(cls, code: int = 400, message: str = "error", data: Any = None) -> "Response":
        """å¤±è´¥å“åº”"""
        return cls(code=code, message=message, data=data)


class PageData(BaseModel, Generic[T]):
    """åˆ†é¡µæ•°æ®"""
    
    list: list[T] = []
    total: int = 0
    page: int = 1
    page_size: int = 20
    total_pages: int = 0
    
    def __init__(self, **data):
        super().__init__(**data)
        if self.total > 0 and self.page_size > 0:
            self.total_pages = (self.total + self.page_size - 1) // self.page_size


class PageResponse(Response[PageData[T]], Generic[T]):
    """åˆ†é¡µå“åº”"""
    
    @classmethod
    def success(
        cls,
        items: list[T],
        total: int,
        page: int = 1,
        page_size: int = 20,
        message: str = "success"
    ) -> "PageResponse":
        page_data = PageData(
            list=items,
            total=total,
            page=page,
            page_size=page_size,
        )
        return cls(code=200, message=message, data=page_data)
```

### 6.5 å¼‚å¸¸å¤„ç†

```python
# backend/app/core/exceptions.py

from fastapi import FastAPI, Request
from fastapi.responses import JSONResponse
from loguru import logger
from app.core.response import Response


class BusinessException(Exception):
    """ä¸šåŠ¡å¼‚å¸¸åŸºç±»"""
    
    def __init__(self, code: int, message: str):
        self.code = code
        self.message = message
        super().__init__(message)


class ErrorCode:
    """é”™è¯¯ç å®šä¹‰"""
    
    # é€šç”¨é”™è¯¯ 1xxxx
    PARAM_ERROR = (10001, "å‚æ•°é”™è¯¯")
    UNAUTHORIZED = (10002, "æœªæˆæƒï¼Œè¯·å…ˆç™»å½•")
    FORBIDDEN = (10003, "æ— æƒé™è®¿é—®")
    NOT_FOUND = (10004, "èµ„æºä¸å­˜åœ¨")
    TOO_MANY_REQUESTS = (10005, "è¯·æ±‚è¿‡äºé¢‘ç¹")
    
    # ç”¨æˆ·ç›¸å…³ 2xxxx
    USER_NOT_FOUND = (20001, "ç”¨æˆ·ä¸å­˜åœ¨")
    USER_EXISTS = (20002, "ç”¨æˆ·å·²å­˜åœ¨")
    PASSWORD_ERROR = (20003, "å¯†ç é”™è¯¯")
    TOKEN_EXPIRED = (20004, "Tokenå·²è¿‡æœŸ")
    TOKEN_INVALID = (20005, "Tokenæ— æ•ˆ")
    
    # ç¬”è®°ç›¸å…³ 3xxxx
    NOTE_NOT_FOUND = (30001, "ç¬”è®°ä¸å­˜åœ¨")
    NOTE_NOT_PUBLISHED = (30002, "ç¬”è®°æœªå‘å¸ƒ")
    
    # çŸ¥è¯†ç‚¹ç›¸å…³ 3xxxx
    TOPIC_NOT_FOUND = (31001, "çŸ¥è¯†ç‚¹ä¸å­˜åœ¨")
    
    # ç§¯åˆ†ç›¸å…³ 4xxxx
    POINTS_NOT_ENOUGH = (40001, "ç§¯åˆ†ä¸è¶³")
    ORDER_NOT_FOUND = (40002, "è®¢å•ä¸å­˜åœ¨")
    ORDER_ALREADY_PAID = (40003, "è®¢å•å·²æ”¯ä»˜")
    
    # AIæœåŠ¡ç›¸å…³ 5xxxx
    AI_SERVICE_ERROR = (50001, "AIæœåŠ¡å¼‚å¸¸")
    AI_QUOTA_EXCEEDED = (50002, "AIè°ƒç”¨é¢åº¦ä¸è¶³")
    
    # èµ„æºç›¸å…³ 6xxxx
    RESOURCE_NOT_FOUND = (60001, "èµ„æºä¸å­˜åœ¨")
    FILE_UPLOAD_ERROR = (60002, "æ–‡ä»¶ä¸Šä¼ å¤±è´¥")
    FILE_TOO_LARGE = (60003, "æ–‡ä»¶è¿‡å¤§")


def setup_exception_handlers(app: FastAPI):
    """æ³¨å†Œå…¨å±€å¼‚å¸¸å¤„ç†å™¨"""
    
    @app.exception_handler(BusinessException)
    async def business_exception_handler(request: Request, exc: BusinessException):
        """ä¸šåŠ¡å¼‚å¸¸å¤„ç†"""
        logger.warning(
            f"[BUSINESS_ERROR] path={request.url.path}, "
            f"code={exc.code}, message={exc.message}"
        )
        return JSONResponse(
            status_code=200,  # ä¸šåŠ¡å¼‚å¸¸è¿”å›200ï¼Œé€šè¿‡codeåŒºåˆ†
            content=Response.fail(code=exc.code, message=exc.message).model_dump(),
        )
    
    @app.exception_handler(Exception)
    async def global_exception_handler(request: Request, exc: Exception):
        """å…¨å±€å¼‚å¸¸å¤„ç†"""
        logger.error(
            f"[SYSTEM_ERROR] path={request.url.path}, error={str(exc)}",
            exc_info=True,
        )
        return JSONResponse(
            status_code=500,
            content=Response.fail(
                code=50000,
                message="ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•"
            ).model_dump(),
        )
```

### 6.6 JWTè®¤è¯

```python
# backend/app/core/security.py

from datetime import datetime, timedelta
from typing import Optional
from jose import JWTError, jwt
from passlib.context import CryptContext
from pydantic import BaseModel

from app.config import settings
from app.core.exceptions import BusinessException, ErrorCode


# å¯†ç å“ˆå¸Œä¸Šä¸‹æ–‡
pwd_context = CryptContext(schemes=["bcrypt"], deprecated="auto")


class TokenPayload(BaseModel):
    """Tokenè½½è·"""
    sub: str  # ç”¨æˆ·ID
    exp: datetime  # è¿‡æœŸæ—¶é—´
    type: str = "access"  # access / refresh


def get_password_hash(password: str) -> str:
    """ç”Ÿæˆå¯†ç å“ˆå¸Œ"""
    return pwd_context.hash(password)


def verify_password(plain_password: str, hashed_password: str) -> bool:
    """éªŒè¯å¯†ç """
    return pwd_context.verify(plain_password, hashed_password)


def create_access_token(
    subject: str,
    expires_delta: Optional[timedelta] = None
) -> str:
    """åˆ›å»ºè®¿é—®ä»¤ç‰Œ"""
    if expires_delta:
        expire = datetime.utcnow() + expires_delta
    else:
        expire = datetime.utcnow() + timedelta(
            minutes=settings.jwt_access_token_expire_minutes
        )
    
    payload = {
        "sub": subject,
        "exp": expire,
        "type": "access",
    }
    
    return jwt.encode(
        payload,
        settings.jwt_secret_key,
        algorithm=settings.jwt_algorithm,
    )


def create_refresh_token(subject: str) -> str:
    """åˆ›å»ºåˆ·æ–°ä»¤ç‰Œ"""
    expire = datetime.utcnow() + timedelta(
        days=settings.jwt_refresh_token_expire_days
    )
    
    payload = {
        "sub": subject,
        "exp": expire,
        "type": "refresh",
    }
    
    return jwt.encode(
        payload,
        settings.jwt_secret_key,
        algorithm=settings.jwt_algorithm,
    )


def verify_token(token: str, token_type: str = "access") -> TokenPayload:
    """éªŒè¯ä»¤ç‰Œ"""
    try:
        payload = jwt.decode(
            token,
            settings.jwt_secret_key,
            algorithms=[settings.jwt_algorithm],
        )
        
        if payload.get("type") != token_type:
            raise BusinessException(*ErrorCode.TOKEN_INVALID)
        
        return TokenPayload(**payload)
    
    except JWTError:
        raise BusinessException(*ErrorCode.TOKEN_INVALID)
```

### 6.7 æ•°æ®åº“è¿æ¥

```python
# backend/app/infrastructure/database/mysql.py

from sqlalchemy.ext.asyncio import AsyncSession, create_async_engine, async_sessionmaker
from sqlalchemy.orm import DeclarativeBase
from loguru import logger

from app.config import settings


class Base(DeclarativeBase):
    """SQLAlchemyåŸºç±»"""
    pass


# å¼‚æ­¥å¼•æ“
engine = create_async_engine(
    settings.mysql_url,
    pool_size=settings.mysql_pool_size,
    max_overflow=settings.mysql_max_overflow,
    echo=settings.app_debug,
)

# å¼‚æ­¥ä¼šè¯å·¥å‚
async_session_factory = async_sessionmaker(
    engine,
    class_=AsyncSession,
    expire_on_commit=False,
)


async def init_mysql():
    """åˆå§‹åŒ–MySQLè¿æ¥"""
    logger.info("ğŸ”Œ Connecting to MySQL...")
    async with engine.begin() as conn:
        # å¯é€‰ï¼šè‡ªåŠ¨åˆ›å»ºè¡¨ï¼ˆç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨Alembicè¿ç§»ï¼‰
        # await conn.run_sync(Base.metadata.create_all)
        pass
    logger.info("âœ… MySQL connected")


async def close_mysql():
    """å…³é—­MySQLè¿æ¥"""
    await engine.dispose()
    logger.info("ğŸ”Œ MySQL disconnected")


async def get_mysql_session() -> AsyncSession:
    """è·å–MySQLä¼šè¯ï¼ˆä¾èµ–æ³¨å…¥ç”¨ï¼‰"""
    async with async_session_factory() as session:
        try:
            yield session
            await session.commit()
        except Exception:
            await session.rollback()
            raise
```

```python
# backend/app/infrastructure/database/mongo.py

from motor.motor_asyncio import AsyncIOMotorClient
from beanie import init_beanie
from loguru import logger

from app.config import settings

# MongoDBå®¢æˆ·ç«¯
mongo_client: AsyncIOMotorClient = None
mongo_db = None


async def init_mongo():
    """åˆå§‹åŒ–MongoDBè¿æ¥"""
    global mongo_client, mongo_db
    
    logger.info("ğŸ”Œ Connecting to MongoDB...")
    
    mongo_client = AsyncIOMotorClient(settings.mongodb_url)
    mongo_db = mongo_client[settings.mongodb_database]
    
    # å¯¼å…¥æ‰€æœ‰Beanieæ–‡æ¡£æ¨¡å‹
    from app.models.mongo.note import Note
    from app.models.mongo.chat import ChatSession, ChatMessage
    from app.models.mongo.log import OperationLog, AILog
    
    # åˆå§‹åŒ–Beanie
    await init_beanie(
        database=mongo_db,
        document_models=[
            Note,
            ChatSession,
            ChatMessage,
            OperationLog,
            AILog,
        ]
    )
    
    logger.info("âœ… MongoDB connected")


async def close_mongo():
    """å…³é—­MongoDBè¿æ¥"""
    global mongo_client
    if mongo_client:
        mongo_client.close()
    logger.info("ğŸ”Œ MongoDB disconnected")


def get_mongo_db():
    """è·å–MongoDBæ•°æ®åº“å®ä¾‹"""
    return mongo_db
```

### 6.8 æ•°æ®æ¨¡å‹ç¤ºä¾‹

#### MySQLæ¨¡å‹ï¼ˆSQLAlchemyï¼‰

```python
# backend/app/models/mysql/user.py

from datetime import datetime
from sqlalchemy import Column, Integer, String, DateTime, Boolean, Text
from sqlalchemy.sql import func

from app.infrastructure.database.mysql import Base


class User(Base):
    """ç”¨æˆ·æ¨¡å‹"""
    
    __tablename__ = "t_user"
    
    id = Column(Integer, primary_key=True, autoincrement=True, comment="ç”¨æˆ·ID")
    email = Column(String(100), unique=True, nullable=False, index=True, comment="é‚®ç®±")
    hashed_password = Column(String(255), nullable=False, comment="å¯†ç å“ˆå¸Œ")
    nickname = Column(String(50), comment="æ˜µç§°")
    avatar = Column(String(255), comment="å¤´åƒURL")
    
    # ç§¯åˆ†ç›¸å…³
    points = Column(Integer, default=0, comment="ç§¯åˆ†ä½™é¢")
    total_recharged = Column(Integer, default=0, comment="ç´¯è®¡å……å€¼ç§¯åˆ†")
    total_consumed = Column(Integer, default=0, comment="ç´¯è®¡æ¶ˆè´¹ç§¯åˆ†")
    
    # å­¦ä¹ ç›¸å…³
    leetcode_username = Column(String(50), comment="LeetCodeç”¨æˆ·å")
    leetcode_rating = Column(Integer, comment="LeetCode Rating")
    target_level = Column(String(20), comment="ç›®æ ‡æ°´å¹³")
    ability_score = Column(Integer, default=0, comment="èƒ½åŠ›è¯„åˆ†")
    
    # çŠ¶æ€
    status = Column(Integer, default=1, comment="çŠ¶æ€: 1æ­£å¸¸ 0ç¦ç”¨")
    role = Column(String(20), default="user", comment="è§’è‰²: user/admin")
    
    # æ—¶é—´æˆ³
    created_at = Column(DateTime, server_default=func.now(), comment="åˆ›å»ºæ—¶é—´")
    updated_at = Column(DateTime, server_default=func.now(), onupdate=func.now(), comment="æ›´æ–°æ—¶é—´")
    last_login_at = Column(DateTime, comment="æœ€åç™»å½•æ—¶é—´")
    
    def __repr__(self):
        return f"<User(id={self.id}, email='{self.email}')>"
```

#### MongoDBæ¨¡å‹ï¼ˆBeanieï¼‰

```python
# backend/app/models/mongo/note.py

from datetime import datetime
from typing import Optional, List
from beanie import Document, Indexed
from pydantic import Field


class Note(Document):
    """å­¦ä¹ ç¬”è®°æ–‡æ¡£"""
    
    # å…³è”ä¿¡æ¯
    topic_id: Indexed(str) = Field(..., description="å…³è”çŸ¥è¯†ç‚¹ID")
    
    # åŸºæœ¬ä¿¡æ¯
    title: str = Field(..., description="ç¬”è®°æ ‡é¢˜")
    summary: Optional[str] = Field(None, description="æ‘˜è¦")
    
    # L1-L4åˆ†å±‚å†…å®¹
    content_l1: Optional[str] = Field(None, description="L1 ç›´è§‚å¼•å…¥")
    content_l2: Optional[str] = Field(None, description="L2 æ ¸å¿ƒåŸç†")
    content_l3: Optional[str] = Field(None, description="L3 ä»£ç å®ç°")
    content_l4: Optional[str] = Field(None, description="L4 å®æˆ˜åˆ†æ")
    
    # å®Œæ•´å†…å®¹
    full_content: Optional[str] = Field(None, description="å®Œæ•´Markdownå†…å®¹")
    
    # å…ƒæ•°æ®
    version: str = Field(default="1.0", description="ç‰ˆæœ¬å·")
    sources: List[str] = Field(default=[], description="å†…å®¹æ¥æº")
    tags: List[str] = Field(default=[], description="æ ‡ç­¾")
    
    # è´¨é‡æŒ‡æ ‡
    quality_score: Optional[float] = Field(None, description="AIè´¨é‡è¯„åˆ†")
    human_score: Optional[float] = Field(None, description="äººå·¥è¯„åˆ†")
    
    # ç»Ÿè®¡
    view_count: int = Field(default=0, description="æµè§ˆæ¬¡æ•°")
    like_count: int = Field(default=0, description="ç‚¹èµæ•°")
    
    # çŠ¶æ€
    status: int = Field(default=0, description="çŠ¶æ€: 0è‰ç¨¿ 1å¾…å®¡æ ¸ 2å·²å‘å¸ƒ 3å·²ä¸‹æ¶")
    
    # å®¡æ ¸ä¿¡æ¯
    reviewer_id: Optional[int] = Field(None, description="å®¡æ ¸äººID")
    review_comment: Optional[str] = Field(None, description="å®¡æ ¸æ„è§")
    reviewed_at: Optional[datetime] = Field(None, description="å®¡æ ¸æ—¶é—´")
    
    # æ—¶é—´æˆ³
    created_at: datetime = Field(default_factory=datetime.now)
    updated_at: datetime = Field(default_factory=datetime.now)
    published_at: Optional[datetime] = Field(None, description="å‘å¸ƒæ—¶é—´")
    
    class Settings:
        name = "notes"  # MongoDBé›†åˆå
        indexes = [
            "topic_id",
            "status",
            [("created_at", -1)],  # é™åºç´¢å¼•
        ]
    
    class Config:
        json_encoders = {
            datetime: lambda v: v.isoformat()
        }
```

### 6.9 Serviceå±‚ç¤ºä¾‹

```python
# backend/app/services/user_service.py

from datetime import datetime
from typing import Optional
from sqlalchemy.ext.asyncio import AsyncSession
from sqlalchemy import select
from loguru import logger

from app.models.mysql.user import User
from app.api.v1.schemas.user import UserCreate, UserUpdate
from app.core.security import get_password_hash, verify_password, create_access_token, create_refresh_token
from app.core.exceptions import BusinessException, ErrorCode


class UserService:
    """ç”¨æˆ·æœåŠ¡"""
    
    def __init__(self, db: AsyncSession):
        self.db = db
    
    async def create_user(self, user_in: UserCreate) -> User:
        """åˆ›å»ºç”¨æˆ·"""
        # æ£€æŸ¥é‚®ç®±æ˜¯å¦å·²å­˜åœ¨
        existing = await self.get_by_email(user_in.email)
        if existing:
            logger.warning(f"[USER][REGISTER] é‚®ç®±å·²å­˜åœ¨, email={user_in.email}")
            raise BusinessException(*ErrorCode.USER_EXISTS)
        
        # åˆ›å»ºç”¨æˆ·
        user = User(
            email=user_in.email,
            hashed_password=get_password_hash(user_in.password),
            nickname=user_in.nickname or user_in.email.split("@")[0],
        )
        
        self.db.add(user)
        await self.db.flush()
        await self.db.refresh(user)
        
        logger.info(f"[USER][REGISTER] æ³¨å†ŒæˆåŠŸ, userId={user.id}, email={user.email}")
        
        return user
    
    async def authenticate(self, email: str, password: str) -> dict:
        """ç”¨æˆ·è®¤è¯"""
        user = await self.get_by_email(email)
        
        if not user:
            logger.warning(f"[USER][LOGIN] ç”¨æˆ·ä¸å­˜åœ¨, email={email}")
            raise BusinessException(*ErrorCode.USER_NOT_FOUND)
        
        if user.status != 1:
            logger.warning(f"[USER][LOGIN] ç”¨æˆ·å·²ç¦ç”¨, userId={user.id}")
            raise BusinessException(20006, "è´¦å·å·²è¢«ç¦ç”¨")
        
        if not verify_password(password, user.hashed_password):
            logger.warning(f"[USER][LOGIN] å¯†ç é”™è¯¯, userId={user.id}")
            raise BusinessException(*ErrorCode.PASSWORD_ERROR)
        
        # æ›´æ–°æœ€åç™»å½•æ—¶é—´
        user.last_login_at = datetime.now()
        await self.db.flush()
        
        # ç”ŸæˆToken
        access_token = create_access_token(str(user.id))
        refresh_token = create_refresh_token(str(user.id))
        
        logger.info(f"[USER][LOGIN] ç™»å½•æˆåŠŸ, userId={user.id}")
        
        return {
            "user": user,
            "access_token": access_token,
            "refresh_token": refresh_token,
            "token_type": "bearer",
        }
    
    async def get_by_id(self, user_id: int) -> Optional[User]:
        """æ ¹æ®IDè·å–ç”¨æˆ·"""
        result = await self.db.execute(
            select(User).where(User.id == user_id)
        )
        return result.scalar_one_or_none()
    
    async def get_by_email(self, email: str) -> Optional[User]:
        """æ ¹æ®é‚®ç®±è·å–ç”¨æˆ·"""
        result = await self.db.execute(
            select(User).where(User.email == email)
        )
        return result.scalar_one_or_none()
    
    async def update_user(self, user_id: int, user_in: UserUpdate) -> User:
        """æ›´æ–°ç”¨æˆ·ä¿¡æ¯"""
        user = await self.get_by_id(user_id)
        if not user:
            raise BusinessException(*ErrorCode.USER_NOT_FOUND)
        
        update_data = user_in.model_dump(exclude_unset=True)
        for field, value in update_data.items():
            setattr(user, field, value)
        
        await self.db.flush()
        await self.db.refresh(user)
        
        logger.info(f"[USER][UPDATE] æ›´æ–°æˆåŠŸ, userId={user_id}, fields={list(update_data.keys())}")
        
        return user
```

### 6.10 APIç«¯ç‚¹ç¤ºä¾‹

```python
# backend/app/api/v1/endpoints/user.py

from fastapi import APIRouter, Depends, HTTPException
from sqlalchemy.ext.asyncio import AsyncSession
from loguru import logger

from app.infrastructure.database.mysql import get_mysql_session
from app.api.deps import get_current_user
from app.api.v1.schemas.user import (
    UserCreate, UserLogin, UserResponse, UserUpdate, TokenResponse
)
from app.api.v1.schemas.common import Response
from app.services.user_service import UserService
from app.models.mysql.user import User


router = APIRouter(prefix="/users", tags=["ç”¨æˆ·ç®¡ç†"])


@router.post("/register", response_model=Response[UserResponse], summary="ç”¨æˆ·æ³¨å†Œ")
async def register(
    user_in: UserCreate,
    db: AsyncSession = Depends(get_mysql_session),
):
    """
    ç”¨æˆ·æ³¨å†Œæ¥å£
    
    - **email**: é‚®ç®±åœ°å€ï¼ˆå”¯ä¸€ï¼‰
    - **password**: å¯†ç ï¼ˆè‡³å°‘6ä½ï¼‰
    - **nickname**: æ˜µç§°ï¼ˆå¯é€‰ï¼‰
    """
    service = UserService(db)
    user = await service.create_user(user_in)
    return Response.success(data=UserResponse.model_validate(user))


@router.post("/login", response_model=Response[TokenResponse], summary="ç”¨æˆ·ç™»å½•")
async def login(
    login_in: UserLogin,
    db: AsyncSession = Depends(get_mysql_session),
):
    """
    ç”¨æˆ·ç™»å½•æ¥å£
    
    è¿”å›JWT Tokenï¼Œç”¨äºåç»­æ¥å£è®¤è¯
    """
    service = UserService(db)
    result = await service.authenticate(login_in.email, login_in.password)
    
    return Response.success(data=TokenResponse(
        access_token=result["access_token"],
        refresh_token=result["refresh_token"],
        token_type=result["token_type"],
        user=UserResponse.model_validate(result["user"]),
    ))


@router.get("/me", response_model=Response[UserResponse], summary="è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯")
async def get_current_user_info(
    current_user: User = Depends(get_current_user),
):
    """
    è·å–å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯
    
    éœ€è¦åœ¨Headerä¸­æºå¸¦ Authorization: Bearer {token}
    """
    return Response.success(data=UserResponse.model_validate(current_user))


@router.put("/me", response_model=Response[UserResponse], summary="æ›´æ–°ç”¨æˆ·ä¿¡æ¯")
async def update_current_user(
    user_in: UserUpdate,
    current_user: User = Depends(get_current_user),
    db: AsyncSession = Depends(get_mysql_session),
):
    """
    æ›´æ–°å½“å‰ç”¨æˆ·ä¿¡æ¯
    """
    service = UserService(db)
    user = await service.update_user(current_user.id, user_in)
    return Response.success(data=UserResponse.model_validate(user))
```

### 6.11 ä¾èµ–æ³¨å…¥

```python
# backend/app/api/deps.py

from typing import Optional
from fastapi import Depends, Header
from sqlalchemy.ext.asyncio import AsyncSession

from app.infrastructure.database.mysql import get_mysql_session
from app.core.security import verify_token
from app.core.exceptions import BusinessException, ErrorCode
from app.services.user_service import UserService
from app.models.mysql.user import User


async def get_current_user(
    authorization: Optional[str] = Header(None),
    db: AsyncSession = Depends(get_mysql_session),
) -> User:
    """è·å–å½“å‰ç™»å½•ç”¨æˆ·"""
    
    if not authorization:
        raise BusinessException(*ErrorCode.UNAUTHORIZED)
    
    # è§£æBearer Token
    parts = authorization.split()
    if len(parts) != 2 or parts[0].lower() != "bearer":
        raise BusinessException(*ErrorCode.TOKEN_INVALID)
    
    token = parts[1]
    
    # éªŒè¯Token
    payload = verify_token(token, "access")
    
    # è·å–ç”¨æˆ·
    service = UserService(db)
    user = await service.get_by_id(int(payload.sub))
    
    if not user:
        raise BusinessException(*ErrorCode.USER_NOT_FOUND)
    
    if user.status != 1:
        raise BusinessException(20006, "è´¦å·å·²è¢«ç¦ç”¨")
    
    return user


async def get_current_admin(
    current_user: User = Depends(get_current_user),
) -> User:
    """è·å–å½“å‰ç®¡ç†å‘˜ç”¨æˆ·"""
    
    if current_user.role != "admin":
        raise BusinessException(*ErrorCode.FORBIDDEN)
    
    return current_user


def get_optional_user(
    authorization: Optional[str] = Header(None),
    db: AsyncSession = Depends(get_mysql_session),
) -> Optional[User]:
    """è·å–å¯é€‰çš„å½“å‰ç”¨æˆ·ï¼ˆæœªç™»å½•è¿”å›Noneï¼‰"""
    
    if not authorization:
        return None
    
    try:
        return get_current_user(authorization, db)
    except BusinessException:
        return None
```

---

## 7. å‰ç«¯å¼€å‘è§„èŒƒï¼ˆuiproï¼‰

### 7.1 uiproç®€ä»‹

**uipro (UI/UX Pro Max)** æ˜¯ä¸€ä¸ªAIè¾…åŠ©çš„å‰ç«¯UIæ¡†æ¶ï¼Œèƒ½å¤Ÿå¿«é€Ÿæ„å»ºé«˜è´¨é‡ã€ä¸“ä¸šçº§çš„ç”¨æˆ·ç•Œé¢ã€‚

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **å®˜æ–¹ç½‘å€** | https://ui.cod.ndjp.net/ |
| **AIè¾…åŠ©** | æ”¯æŒClaudeç­‰AIåŠ©æ‰‹ç”Ÿæˆä»£ç  |
| **ç»„ä»¶ä¸°å¯Œ** | æä¾›å¤§é‡é¢„è®¾ç»„ä»¶ |
| **å“åº”å¼** | è‡ªåŠ¨é€‚é…å¤šç«¯ |
| **ä¸»é¢˜å®šåˆ¶** | æ”¯æŒæ·±è‰²/æµ…è‰²ä¸»é¢˜ |

### 7.2 åˆå§‹åŒ–é¡¹ç›®

```bash
# å®‰è£…uipro CLIï¼ˆå…¨å±€ï¼‰
npm install -g @aspect/uipro-cli

# éªŒè¯å®‰è£…
uipro --version

# åˆå§‹åŒ–é¡¹ç›®ï¼ˆä½¿ç”¨Claude AIï¼‰
cd frontend
uipro init --ai claude

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼‰
npm run dev
```

### 7.3 uiproé…ç½®

```typescript
// frontend/src/uipro.config.ts

export default {
  // AIåŠ©æ‰‹é…ç½®
  ai: {
    provider: 'claude',
    model: 'claude-3-sonnet',
  },
  
  // ä¸»é¢˜é…ç½®
  theme: {
    // å“ç‰Œè‰²
    colors: {
      primary: {
        50: '#eef2ff',
        100: '#e0e7ff',
        200: '#c7d2fe',
        300: '#a5b4fc',
        400: '#818cf8',
        500: '#6366f1',  // ä¸»è‰²
        600: '#4f46e5',
        700: '#4338ca',
        800: '#3730a3',
        900: '#312e81',
      },
      secondary: {
        500: '#8b5cf6',  // è¾…åŠ©è‰² Violet
      },
      accent: {
        500: '#06b6d4',  // å¼ºè°ƒè‰² Cyan
      },
    },
    
    // è¯­ä¹‰è‰²
    semantic: {
      success: '#10b981',  // Emerald
      warning: '#f59e0b',  // Amber
      error: '#ef4444',    // Red
      info: '#3b82f6',     // Blue
    },
    
    // åœ†è§’
    borderRadius: {
      none: '0',
      sm: '4px',
      md: '8px',
      lg: '12px',
      xl: '16px',
      full: '9999px',
    },
    
    // é˜´å½±
    shadows: {
      sm: '0 1px 2px 0 rgb(0 0 0 / 0.05)',
      md: '0 4px 6px -1px rgb(0 0 0 / 0.1)',
      lg: '0 10px 15px -3px rgb(0 0 0 / 0.1)',
      xl: '0 20px 25px -5px rgb(0 0 0 / 0.1)',
    },
  },
  
  // å“åº”å¼æ–­ç‚¹
  breakpoints: {
    sm: '640px',
    md: '768px',
    lg: '1024px',
    xl: '1280px',
    '2xl': '1536px',
  },
  
  // ç»„ä»¶é»˜è®¤é…ç½®
  components: {
    button: {
      defaultVariant: 'solid',
      defaultSize: 'md',
    },
    input: {
      defaultSize: 'md',
    },
    card: {
      defaultShadow: 'sm',
      defaultRadius: 'lg',
    },
  },
}
```

### 7.4 ä½¿ç”¨uipro AIç”Ÿæˆç»„ä»¶

```bash
# ç”Ÿæˆç»„ä»¶
uipro generate component "ä¸€ä¸ªæ˜¾ç¤ºç®—æ³•ç¬”è®°çš„å¡ç‰‡ï¼ŒåŒ…å«æ ‡é¢˜ã€éš¾åº¦æ˜Ÿçº§ã€æ‘˜è¦ã€æ ‡ç­¾å’ŒæŸ¥çœ‹æŒ‰é’®"

# ç”Ÿæˆé¡µé¢
uipro generate page "ç¬”è®°è¯¦æƒ…é¡µï¼Œå·¦ä¾§L1-L4æ ‡ç­¾é¡µåˆ‡æ¢ï¼Œå³ä¾§æ˜¾ç¤ºç›¸å…³çŸ¥è¯†ç‚¹"

# ç”Ÿæˆè¡¨å•
uipro generate form "ç”¨æˆ·æ³¨å†Œè¡¨å•ï¼ŒåŒ…å«é‚®ç®±ã€å¯†ç ã€ç¡®è®¤å¯†ç ã€æ˜µç§°ï¼Œéœ€è¦è¡¨å•éªŒè¯"

# ç”Ÿæˆåˆ—è¡¨
uipro generate list "ç¬”è®°åˆ—è¡¨é¡µï¼Œå¡ç‰‡ç½‘æ ¼å¸ƒå±€ï¼Œæ”¯æŒæœç´¢ç­›é€‰åˆ†é¡µ"
```

### 7.5 ç»„ä»¶ä½¿ç”¨ç¤ºä¾‹

```vue
<!-- frontend/src/pages/note/[id].vue -->
<template>
  <UContainer class="py-8">
    <!-- åŠ è½½çŠ¶æ€ -->
    <template v-if="loading">
      <USkeleton class="h-12 w-1/2 mb-4" />
      <USkeleton class="h-6 w-full mb-2" />
      <USkeleton class="h-6 w-3/4" />
    </template>
    
    <!-- ç¬”è®°å†…å®¹ -->
    <template v-else-if="note">
      <!-- æ ‡é¢˜åŒº -->
      <div class="mb-8">
        <div class="flex items-center gap-4 mb-4">
          <h1 class="text-3xl font-bold text-gray-900 dark:text-white">
            {{ note.title }}
          </h1>
          <UBadge :color="getDifficultyColor(note.difficulty)">
            éš¾åº¦ {{ note.difficulty }}
          </UBadge>
        </div>
        <p class="text-gray-600 dark:text-gray-300">{{ note.summary }}</p>
      </div>
      
      <!-- L1-L4 æ ‡ç­¾é¡µ -->
      <UTabs v-model="activeTab" :items="tabItems">
        <template #l1>
          <UCard class="mt-4">
            <MarkdownRenderer :content="note.content_l1" />
          </UCard>
        </template>
        
        <template #l2>
          <UCard class="mt-4">
            <MarkdownRenderer :content="note.content_l2" :math="true" />
          </UCard>
        </template>
        
        <template #l3>
          <UCard class="mt-4">
            <MarkdownRenderer :content="note.content_l3" :highlight="true" />
          </UCard>
        </template>
        
        <template #l4>
          <UCard class="mt-4">
            <MarkdownRenderer :content="note.content_l4" />
          </UCard>
        </template>
      </UTabs>
    </template>
    
    <!-- ç©ºçŠ¶æ€ -->
    <UEmpty v-else description="ç¬”è®°ä¸å­˜åœ¨" />
  </UContainer>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue'
import { useRoute } from 'vue-router'
import { getNoteById } from '@/api/note'
import type { Note } from '@/types/note'

const route = useRoute()
const loading = ref(true)
const note = ref<Note | null>(null)
const activeTab = ref('l1')

const tabItems = [
  { key: 'l1', label: 'L1 ç›´è§‚å¼•å…¥', icon: 'lightbulb' },
  { key: 'l2', label: 'L2 æ ¸å¿ƒåŸç†', icon: 'book-open' },
  { key: 'l3', label: 'L3 ä»£ç å®ç°', icon: 'code' },
  { key: 'l4', label: 'L4 å®æˆ˜åˆ†æ', icon: 'target' },
]

const getDifficultyColor = (difficulty: number) => {
  const colors = ['emerald', 'blue', 'yellow', 'orange', 'red']
  return colors[Math.min(difficulty - 1, 4)]
}

onMounted(async () => {
  try {
    const id = route.params.id as string
    note.value = await getNoteById(id)
  } finally {
    loading.value = false
  }
})
</script>
```

### 7.6 APIè¯·æ±‚å°è£…

```typescript
// frontend/src/api/request.ts

import axios, { AxiosInstance, AxiosRequestConfig, AxiosResponse } from 'axios'
import { useUserStore } from '@/stores/user'

// åˆ›å»ºAxioså®ä¾‹
const instance: AxiosInstance = axios.create({
  baseURL: import.meta.env.VITE_API_BASE_URL || '/api/v1',
  timeout: 30000,
  headers: {
    'Content-Type': 'application/json',
  },
})

// è¯·æ±‚æ‹¦æˆªå™¨
instance.interceptors.request.use(
  (config) => {
    const userStore = useUserStore()
    if (userStore.token) {
      config.headers.Authorization = `Bearer ${userStore.token}`
    }
    return config
  },
  (error) => {
    return Promise.reject(error)
  }
)

// å“åº”æ‹¦æˆªå™¨
instance.interceptors.response.use(
  (response: AxiosResponse) => {
    const { code, message, data } = response.data
    
    if (code === 200) {
      return data
    }
    
    // ä¸šåŠ¡é”™è¯¯
    if (code === 10002 || code === 20004) {
      // æœªæˆæƒæˆ–Tokenè¿‡æœŸï¼Œè·³è½¬ç™»å½•
      const userStore = useUserStore()
      userStore.logout()
      window.location.href = '/user/login'
    }
    
    return Promise.reject(new Error(message || 'è¯·æ±‚å¤±è´¥'))
  },
  (error) => {
    // ç½‘ç»œé”™è¯¯
    const message = error.response?.data?.message || 'ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•'
    return Promise.reject(new Error(message))
  }
)

export default instance
```

### 7.7 å‰ç«¯éªŒè¯æ¸…å•

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# éªŒè¯é¡¹ç›®ï¼ˆæ¯ä¸ªé¡µé¢éœ€æ£€æŸ¥ï¼‰ï¼š
# âœ… é¡µé¢æ­£å¸¸æ¸²æŸ“ï¼Œæ— æ§åˆ¶å°é”™è¯¯
# âœ… å“åº”å¼å¸ƒå±€æ­£å¸¸ï¼ˆè°ƒæ•´æµè§ˆå™¨çª—å£ï¼‰
# âœ… æ·±è‰²/æµ…è‰²æ¨¡å¼åˆ‡æ¢æ­£å¸¸
# âœ… è¡¨å•éªŒè¯æ­£å¸¸
# âœ… APIè¯·æ±‚å’Œå“åº”æ­£å¸¸
# âœ… åŠ è½½çŠ¶æ€å’Œé”™è¯¯çŠ¶æ€æ˜¾ç¤ºæ­£å¸¸
# âœ… åŠ¨ç”»è¿‡æ¸¡æµç•…
```

---

## 8. æ•°æ®åº“è®¾è®¡è§„èŒƒ

### 8.1 MySQLå­˜å‚¨ï¼ˆç»“æ„åŒ–æ•°æ®ï¼‰

| è¡¨å | è¯´æ˜ | å­˜å‚¨æ•°æ®ç±»å‹ |
|------|------|--------------|
| `t_user` | ç”¨æˆ·è¡¨ | è´¦å·ä¿¡æ¯ã€ç§¯åˆ†ã€èƒ½åŠ›è¯„åˆ† |
| `t_point_log` | ç§¯åˆ†æµæ°´ | å……å€¼ã€æ¶ˆè´¹ã€é€€æ¬¾è®°å½• |
| `t_order` | è®¢å•è¡¨ | å……å€¼è®¢å• |
| `t_topic` | çŸ¥è¯†ç‚¹è¡¨ | çŸ¥è¯†ç‚¹å…ƒæ•°æ® |
| `t_resource` | èµ„æºè¡¨ | PDFã€è§†é¢‘ç­‰èµ„æºå…ƒæ•°æ® |
| `t_config` | é…ç½®è¡¨ | ç³»ç»Ÿé…ç½® |

### 8.2 MongoDBå­˜å‚¨ï¼ˆæ–‡æ¡£æ•°æ®ï¼‰

| é›†åˆå | è¯´æ˜ | å­˜å‚¨æ•°æ®ç±»å‹ |
|--------|------|--------------|
| `notes` | ç¬”è®°é›†åˆ | L1-L4å†…å®¹ã€Markdownæ–‡æœ¬ |
| `note_fragments` | å†…å®¹ç‰‡æ®µ | ä»èµ„æºæå–çš„ç‰‡æ®µ |
| `chat_sessions` | å¯¹è¯ä¼šè¯ | AIæ•™ç»ƒä¼šè¯ |
| `chat_messages` | å¯¹è¯æ¶ˆæ¯ | èŠå¤©è®°å½• |
| `operation_logs` | æ“ä½œæ—¥å¿— | ç”¨æˆ·æ“ä½œè®°å½• |
| `ai_logs` | AIè°ƒç”¨æ—¥å¿— | Tokenã€æˆæœ¬ç»Ÿè®¡ |

### 8.3 MinIOå­˜å‚¨ï¼ˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼‰

| Bucket | è¯´æ˜ | æ–‡ä»¶ç±»å‹ |
|--------|------|----------|
| `resources` | èµ„æºæ–‡ä»¶ | PDFã€è§†é¢‘ |
| `images` | å›¾ç‰‡èµ„æº | ç¬”è®°å›¾ç‰‡ã€æˆªå›¾ |
| `avatars` | ç”¨æˆ·å¤´åƒ | å¤´åƒå›¾ç‰‡ |

---

## 9. æµ‹è¯•ç­–ç•¥

### 9.1 æµ‹è¯•ç±»å‹

| ç±»å‹ | å·¥å…· | è¦†ç›–èŒƒå›´ |
|------|------|----------|
| å•å…ƒæµ‹è¯• | pytest | Serviceå±‚ã€å·¥å…·å‡½æ•° |
| é›†æˆæµ‹è¯• | pytest + httpx | APIç«¯ç‚¹ |
| E2Eæµ‹è¯• | Playwright | å…³é”®ç”¨æˆ·æµç¨‹ |

### 9.2 pytesté…ç½®

```ini
# backend/pytest.ini

[pytest]
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*
asyncio_mode = auto
addopts = -v --tb=short --strict-markers
markers =
    slow: æ ‡è®°æ…¢é€Ÿæµ‹è¯•
    integration: æ ‡è®°é›†æˆæµ‹è¯•
```

### 9.3 å•å…ƒæµ‹è¯•ç¤ºä¾‹

```python
# backend/tests/test_services/test_user_service.py

import pytest
from unittest.mock import AsyncMock, MagicMock, patch
from app.services.user_service import UserService
from app.api.v1.schemas.user import UserCreate
from app.core.exceptions import BusinessException, ErrorCode


class TestUserService:
    """ç”¨æˆ·æœåŠ¡å•å…ƒæµ‹è¯•"""
    
    @pytest.fixture
    def mock_db(self):
        """Mockæ•°æ®åº“ä¼šè¯"""
        db = AsyncMock()
        db.add = MagicMock()
        db.flush = AsyncMock()
        db.refresh = AsyncMock()
        return db
    
    @pytest.fixture
    def service(self, mock_db):
        """åˆ›å»ºæœåŠ¡å®ä¾‹"""
        return UserService(mock_db)
    
    # ==================== æ­£å¸¸åœºæ™¯ ====================
    
    @pytest.mark.asyncio
    async def test_create_user_success(self, service, mock_db):
        """æµ‹è¯•åˆ›å»ºç”¨æˆ· - æˆåŠŸ"""
        # Arrange
        user_in = UserCreate(
            email="test@example.com",
            password="password123",
            nickname="TestUser"
        )
        
        with patch.object(service, 'get_by_email', return_value=None):
            # Act
            mock_db.refresh = AsyncMock(side_effect=lambda user: setattr(user, 'id', 1))
            result = await service.create_user(user_in)
        
        # Assert
        assert result.email == "test@example.com"
        assert result.nickname == "TestUser"
        mock_db.add.assert_called_once()
        mock_db.flush.assert_called_once()
    
    @pytest.mark.asyncio
    async def test_authenticate_success(self, service):
        """æµ‹è¯•ç”¨æˆ·è®¤è¯ - æˆåŠŸ"""
        # Arrange
        mock_user = MagicMock()
        mock_user.id = 1
        mock_user.status = 1
        mock_user.hashed_password = "$2b$12$test"
        
        with patch.object(service, 'get_by_email', return_value=mock_user):
            with patch('app.services.user_service.verify_password', return_value=True):
                # Act
                result = await service.authenticate("test@example.com", "password123")
        
        # Assert
        assert result["user"] == mock_user
        assert "access_token" in result
        assert "refresh_token" in result
    
    # ==================== å¼‚å¸¸åœºæ™¯ ====================
    
    @pytest.mark.asyncio
    async def test_create_user_email_exists(self, service):
        """æµ‹è¯•åˆ›å»ºç”¨æˆ· - é‚®ç®±å·²å­˜åœ¨"""
        user_in = UserCreate(
            email="existing@example.com",
            password="password123"
        )
        
        with patch.object(service, 'get_by_email', return_value=MagicMock()):
            with pytest.raises(BusinessException) as exc_info:
                await service.create_user(user_in)
        
        assert exc_info.value.code == ErrorCode.USER_EXISTS[0]
    
    @pytest.mark.asyncio
    async def test_authenticate_user_not_found(self, service):
        """æµ‹è¯•ç”¨æˆ·è®¤è¯ - ç”¨æˆ·ä¸å­˜åœ¨"""
        with patch.object(service, 'get_by_email', return_value=None):
            with pytest.raises(BusinessException) as exc_info:
                await service.authenticate("notexist@example.com", "password")
        
        assert exc_info.value.code == ErrorCode.USER_NOT_FOUND[0]
    
    @pytest.mark.asyncio
    async def test_authenticate_password_error(self, service):
        """æµ‹è¯•ç”¨æˆ·è®¤è¯ - å¯†ç é”™è¯¯"""
        mock_user = MagicMock()
        mock_user.id = 1
        mock_user.status = 1
        mock_user.hashed_password = "$2b$12$test"
        
        with patch.object(service, 'get_by_email', return_value=mock_user):
            with patch('app.services.user_service.verify_password', return_value=False):
                with pytest.raises(BusinessException) as exc_info:
                    await service.authenticate("test@example.com", "wrongpassword")
        
        assert exc_info.value.code == ErrorCode.PASSWORD_ERROR[0]
```

### 9.4 è¿è¡Œæµ‹è¯•

```bash
# è¿›å…¥åç«¯ç›®å½•
cd backend

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest tests/ -v

# è¿è¡Œç‰¹å®šæ–‡ä»¶
pytest tests/test_services/test_user_service.py -v

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest tests/ -v --cov=app --cov-report=html --cov-report=term

# åªè¿è¡Œå¿«é€Ÿæµ‹è¯•
pytest tests/ -v -m "not slow"

# æŸ¥çœ‹è¦†ç›–ç‡æŠ¥å‘Š
open htmlcov/index.html
```

---

## 10. æ—¥å¿—ä¸ç›‘æ§

### 10.1 æ—¥å¿—é…ç½®

```python
# backend/app/core/logging.py

import sys
from pathlib import Path
from loguru import logger

from app.config import settings


def setup_logging():
    """é…ç½®æ—¥å¿—ç³»ç»Ÿ"""
    log_path = Path(settings.log_path)
    log_path.mkdir(parents=True, exist_ok=True)
    
    # ç§»é™¤é»˜è®¤handler
    logger.remove()
    
    # æ—¥å¿—æ ¼å¼
    log_format = (
        "<green>{time:YYYY-MM-DD HH:mm:ss}</green> | "
        "<level>{level: <8}</level> | "
        "<cyan>{name}</cyan>:<cyan>{function}</cyan>:<cyan>{line}</cyan> | "
        "<level>{message}</level>"
    )
    
    file_format = (
        "{time:YYYY-MM-DD HH:mm:ss} | "
        "{level: <8} | "
        "{name}:{function}:{line} | "
        "{message}"
    )
    
    # æ§åˆ¶å°è¾“å‡º
    logger.add(
        sys.stdout,
        format=log_format,
        level=settings.log_level,
        colorize=True,
    )
    
    # åº”ç”¨æ—¥å¿—
    logger.add(
        log_path / "app.log",
        format=file_format,
        level="INFO",
        rotation=settings.log_rotation,
        retention=settings.log_retention,
        compression="gz",
        encoding="utf-8",
    )
    
    # é”™è¯¯æ—¥å¿—
    logger.add(
        log_path / "error.log",
        format=file_format,
        level="ERROR",
        rotation=settings.log_rotation,
        retention="90 days",
        compression="gz",
        encoding="utf-8",
        backtrace=True,
        diagnose=True,
    )
    
    logger.info("ğŸ“ Logging system initialized")
```

### 10.2 æ—¥å¿—ä½¿ç”¨è§„èŒƒ

```python
from loguru import logger

# ç”¨æˆ·æ“ä½œ
logger.info(f"[USER][LOGIN] userId={user.id}, ip={ip}, result=SUCCESS")
logger.info(f"[USER][REGISTER] email={email}, userId={user.id}")
logger.warning(f"[USER][LOGIN] å¯†ç é”™è¯¯, userId={user.id}, attempts={attempts}")

# ç§¯åˆ†å˜åŠ¨
logger.info(f"[POINT][RECHARGE] userId={user_id}, amount=+{amount}, balance={balance}")
logger.info(f"[POINT][CONSUME] userId={user_id}, amount=-{cost}, reason={reason}")

# AIè°ƒç”¨
logger.info(f"[AI][CHAT] userId={user_id}, tokens={tokens}, cost={cost}ms")
logger.error(f"[AI][ERROR] è°ƒç”¨å¤±è´¥, error={str(e)}")

# å†…å®¹æ“ä½œ
logger.info(f"[NOTE][PUBLISH] noteId={note_id}, operator={admin_id}")
logger.info(f"[RESOURCE][UPLOAD] resourceId={id}, type={type}, size={size}")
```

---

## 11. APIè®¾è®¡è§„èŒƒ

### 11.1 RESTfulè§„èŒƒ

```yaml
# èµ„æºå‘½åï¼šå¤æ•°åè¯
GET    /api/v1/notes              # è·å–ç¬”è®°åˆ—è¡¨
GET    /api/v1/notes/{id}         # è·å–ç¬”è®°è¯¦æƒ…
POST   /api/v1/notes              # åˆ›å»ºç¬”è®°
PUT    /api/v1/notes/{id}         # æ›´æ–°ç¬”è®°
DELETE /api/v1/notes/{id}         # åˆ é™¤ç¬”è®°

# åµŒå¥—èµ„æº
GET    /api/v1/topics/{id}/notes  # è·å–çŸ¥è¯†ç‚¹ä¸‹çš„ç¬”è®°

# æ“ä½œç±»æ¥å£
POST   /api/v1/notes/{id}/publish # å‘å¸ƒç¬”è®°
POST   /api/v1/coach/chat         # AIå¯¹è¯
```

### 11.2 ç»Ÿä¸€å“åº”æ ¼å¼

```json
// æˆåŠŸå“åº”
{
  "code": 200,
  "message": "success",
  "data": { ... },
  "timestamp": 1705654321000
}

// åˆ†é¡µå“åº”
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [...],
    "total": 100,
    "page": 1,
    "page_size": 20,
    "total_pages": 5
  },
  "timestamp": 1705654321000
}

// é”™è¯¯å“åº”
{
  "code": 20001,
  "message": "ç”¨æˆ·ä¸å­˜åœ¨",
  "data": null,
  "timestamp": 1705654321000
}
```

---

## 12. éƒ¨ç½²æµç¨‹

### 12.1 Dockeréƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
docker-compose -f docker/docker-compose.yml build

# å¯åŠ¨æœåŠ¡
docker-compose -f docker/docker-compose.yml up -d

# æŸ¥çœ‹çŠ¶æ€
docker-compose -f docker/docker-compose.yml ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose -f docker/docker-compose.yml logs -f backend
```

### 12.2 éƒ¨ç½²è„šæœ¬

```bash
#!/bin/bash
# scripts/deploy.sh

set -e

echo "ğŸš€ å¼€å§‹éƒ¨ç½² ACM ç®—æ³•å­¦ä¹ å¹³å°..."

# 1. æ‹‰å–æœ€æ–°ä»£ç 
git checkout master
git pull origin master

# 2. è¿è¡Œæµ‹è¯•
cd backend
source venv/bin/activate
pytest tests/ -v --cov=app --cov-fail-under=80
cd ..

# 3. æ„å»ºé•œåƒ
docker-compose -f docker/docker-compose.yml build

# 4. æ•°æ®åº“è¿ç§»
docker-compose run --rm backend alembic upgrade head

# 5. é‡å¯æœåŠ¡
docker-compose -f docker/docker-compose.yml up -d

# 6. å¥åº·æ£€æŸ¥
sleep 10
curl -f http://localhost/health || exit 1

echo "âœ… éƒ¨ç½²å®Œæˆï¼"
```

---

## 13. å¼€å‘ä»»åŠ¡åˆ†è§£

### Phase 1: åŸºç¡€æ¶æ„ï¼ˆWeek 1-2ï¼‰
- é¡¹ç›®åˆå§‹åŒ–ã€Dockerç¯å¢ƒ
- Pythonåç«¯éª¨æ¶
- å‰ç«¯uiproåˆå§‹åŒ–
- ç”¨æˆ·ç³»ç»Ÿå®Œæ•´å®ç°

### Phase 2: æ ¸å¿ƒåŠŸèƒ½ï¼ˆWeek 3-6ï¼‰
- çŸ¥è¯†ç‚¹æ¨¡å—
- ç¬”è®°æ¨¡å—ï¼ˆL1-L4ï¼‰
- ç§¯åˆ†ç³»ç»Ÿ
- AIæ•™ç»ƒ

### Phase 3: ç®¡ç†åå°ï¼ˆWeek 7-8ï¼‰
- èµ„æºä¸Šä¼ 
- PDFæ ¡å¯¹å™¨
- ç¬”è®°å®¡æ ¸
- ç¬”è®°ç”Ÿæˆå¼•æ“

### Phase 4: æ”¶å°¾å‘å¸ƒï¼ˆWeek 9-10ï¼‰
- å®£ä¼ é¡µé¢
- æ–‡æ¡£å®Œå–„
- æµ‹è¯•éƒ¨ç½²

---

## 14. é™„å½•

### 14.1 å¸¸ç”¨å‘½ä»¤

```bash
# Git
git checkout dev && git pull
git add . && git commit -m "feat: xxx"
git push origin dev

# åç«¯
cd backend
source venv/bin/activate
uvicorn app.main:app --reload
pytest tests/ -v --cov=app

# å‰ç«¯
cd frontend
npm run dev
npm run build

# Docker
docker-compose -f docker/docker-compose.dev.yml up -d
docker-compose logs -f
```

### 14.2 å‚è€ƒé“¾æ¥

| èµ„æº | é“¾æ¥ |
|------|------|
| uiproå®˜ç½‘ | https://ui.cod.ndjp.net/ |
| FastAPIæ–‡æ¡£ | https://fastapi.tiangolo.com/ |
| SQLAlchemy 2.0 | https://docs.sqlalchemy.org/ |
| Beanie ODM | https://beanie-odm.dev/ |
| Pydantic V2 | https://docs.pydantic.dev/ |

---

> ğŸ“Œ **æ ¸å¿ƒè¦æ±‚**
> 
> 1. **å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%**
> 2. **å‰ç«¯ä½¿ç”¨uiproå·¥å…·å¼€å‘**
> 3. **GitåŒåˆ†æ”¯ç­–ç•¥ï¼šdevå¼€å‘ â†’ masterå‘å¸ƒ**
> 4. **å…³é”®æ“ä½œå¿…é¡»è®°å½•æ—¥å¿—**
