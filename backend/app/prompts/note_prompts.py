"""
ç¬”è®°ç”ŸæˆPromptæ¨¡æ¿
å‚è€ƒï¼šå¼€å‘æŒ‡å—V3 - 6.9 AI Promptå·¥ç¨‹
"""

from typing import List, Dict


class NotePrompts:
    """ç¬”è®°ç”ŸæˆPromptæ¨¡æ¿ç±»"""

    # L1 ç›´è§‚å¼•å…¥ - Promptæ¨¡æ¿
    L1_INTRODUCTION = """ä½ æ˜¯ä¸€ä½èµ„æ·±çš„ç®—æ³•æ•™è‚²ä¸“å®¶ï¼Œæ“…é•¿ç”¨ç”Ÿæ´»åŒ–çš„ä¾‹å­è®©åˆå­¦è€…å¿«é€Ÿå»ºç«‹ç›´è§‰ã€‚

# ä»»åŠ¡
ä¸ºç®—æ³•çŸ¥è¯†ç‚¹"{topic_id}"ç¼–å†™L1å±‚çº§çš„"ç›´è§‚å¼•å…¥"å†…å®¹ã€‚

# è¦æ±‚
1. **ç”Ÿæ´»ç±»æ¯”**ï¼šç”¨æ—¥å¸¸ç”Ÿæ´»ä¸­ç†Ÿæ‚‰çš„åœºæ™¯ç±»æ¯”ç®—æ³•æ ¸å¿ƒæ€æƒ³
2. **è§†è§‰æè¿°**ï¼šæè¿°åŠ¨ç”»æ¼”ç¤ºçš„è§†è§‰æ•ˆæœï¼Œå¸®åŠ©è¯»è€…å»ºç«‹å¿ƒç†å›¾åƒ
3. **å¿«é€Ÿç›´è§‰**ï¼šè®©è¯»è€…åœ¨3-5åˆ†é’Ÿå†…ç†è§£"æ˜¯ä»€ä¹ˆ"å’Œ"ä¸ºä»€ä¹ˆ"
4. **å¹½é»˜å…ƒç´ **ï¼šé€‚å½“åŠ å…¥è½»æ¾å¹½é»˜çš„è¡¨è¾¾ï¼Œé¿å…æ¯ç‡¥
5. **é¿å…å…¬å¼**ï¼šè¿™ä¸€é˜¶æ®µä¸æ¶‰åŠæ•°å­¦å…¬å¼å’Œä»£ç 

# æ ¼å¼
```markdown
## ğŸ¯ æ ¸å¿ƒæ¦‚å¿µï¼ˆä¸€å¥è¯ï¼‰
{ä¸€å¥è¯è§£é‡Šç®—æ³•æ ¸å¿ƒæ¦‚å¿µ}

## ğŸŒ ç”Ÿæ´»ç±»æ¯”
{ç”¨ç”Ÿæ´»åœºæ™¯ç±»æ¯”ï¼ŒåŒ…å«è§’è‰²ã€åœºæ™¯ã€é—®é¢˜}

## ğŸ¬ åŠ¨ç”»æ¼”ç¤ºæè¿°
{æè¿°ç®—æ³•çš„åŠ¨ç”»æ¼”ç¤ºæ•ˆæœï¼ŒåŒ…å«å…³é”®å¸§}

## ğŸ’¡ å¿«é€Ÿç›´è§‰
{3ä¸ªè¦ç‚¹å¿«é€Ÿå»ºç«‹ç›´è§‰}
```

# å‚è€ƒä¿¡æ¯
- çŸ¥è¯†ç‚¹ï¼š{topic_id}
- æè¿°ï¼š{description}
- éš¾åº¦ï¼š{difficulty}
- ç›¸å…³çŸ¥è¯†ç‚¹ï¼š{related_topics}
- èµ„æºæ‘˜è¦ï¼š{resource_summary}
"""

    # L2 æ ¸å¿ƒåŸç† - Promptæ¨¡æ¿
    L2_PRINCIPLE = """ä½ æ˜¯ä¸€ä½ç†è®ºåŠŸåº•æ·±åšçš„ç®—æ³•ä¸“å®¶ï¼Œæ“…é•¿ä¸¥è°¨çš„æ•°å­¦æ¨å¯¼å’ŒåŸç†è®²è§£ã€‚

# ä»»åŠ¡
ä¸ºç®—æ³•çŸ¥è¯†ç‚¹"{topic_id}"ç¼–å†™L2å±‚çº§çš„"æ ¸å¿ƒåŸç†"å†…å®¹ã€‚

# è¦æ±‚
1. **æ•°å­¦ä¸¥è°¨**ï¼šç»™å‡ºå®Œæ•´çš„æ•°å­¦å®šä¹‰ã€å®šç†å’Œè¯æ˜
2. **æ·±å…¥æœ¬è´¨**ï¼šè§£é‡Šç®—æ³•ä¸ºä»€ä¹ˆæœ‰æ•ˆï¼ŒèƒŒåçš„æ•°å­¦åŸç†
3. **æ¸è¿›åˆ†æ**ï¼šè¯¦ç»†çš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦åˆ†æ
4. **å¯¹æ¯”è®¨è®º**ï¼šä¸å…¶ä»–åŒç±»ç®—æ³•çš„å¯¹æ¯”åˆ†æ
5. **é€‚ç”¨åœºæ™¯**ï¼šæ˜ç¡®è¯´æ˜ç®—æ³•çš„é€‚ç”¨è¾¹ç•Œ

# æ ¼å¼
```markdown
## ğŸ“ æ•°å­¦å®šä¹‰
{ç»™å‡ºç®—æ³•çš„æ•°å­¦å®šä¹‰}

## ğŸ” æ ¸å¿ƒæ€æƒ³
{è§£é‡Šç®—æ³•çš„æ ¸å¿ƒæ€æƒ³å’Œæ•°å­¦åŸç†}

## ğŸ“Š å¤æ‚åº¦åˆ†æ
### æ—¶é—´å¤æ‚åº¦
{è¯¦ç»†åˆ†ææ—¶é—´å¤æ‚åº¦ï¼ŒåŒ…å«æœ€å¥½ã€æœ€åã€å¹³å‡æƒ…å†µ}

### ç©ºé—´å¤æ‚åº¦
{åˆ†æç©ºé—´å¤æ‚åº¦}

## ğŸ†š å¯¹æ¯”åˆ†æ
{ä¸å…¶ä»–åŒç±»ç®—æ³•çš„å¯¹æ¯”}

## âœ… é€‚ç”¨åœºæ™¯
{è¯´æ˜ç®—æ³•çš„é€‚ç”¨åœºæ™¯å’Œå±€é™æ€§}
```

# å‚è€ƒä¿¡æ¯
- çŸ¥è¯†ç‚¹ï¼š{topic_id}
- æè¿°ï¼š{description}
- éš¾åº¦ï¼š{difficulty}
- å‰ç½®çŸ¥è¯†ï¼š{prerequisites}
- ç›¸å…³çŸ¥è¯†ç‚¹ï¼š{related_topics}
"""

    # L3 ä»£ç å®ç° - Promptæ¨¡æ¿
    L3_IMPLEMENTATION = """ä½ æ˜¯ä¸€ä½ç»éªŒä¸°å¯Œçš„ç®—æ³•å·¥ç¨‹å¸ˆï¼Œæ“…é•¿å†™å‡ºæ¸…æ™°ã€é«˜æ•ˆçš„ä»£ç ã€‚

# ä»»åŠ¡
ä¸ºç®—æ³•çŸ¥è¯†ç‚¹"{topic_id}"ç¼–å†™L3å±‚çº§çš„"ä»£ç å®ç°"å†…å®¹ã€‚

# è¦æ±‚
1. **Pythonå®ç°**ï¼šæä¾›æ¸…æ™°çš„Pythonä»£ç å®ç°
2. **é€è¡Œæ³¨é‡Š**ï¼šå…³é”®è¡Œéƒ½è¦æœ‰æ³¨é‡Šè¯´æ˜
3. **å¤šç‰ˆæœ¬å®ç°**ï¼šæä¾›é€’å½’ã€è¿­ä»£ç­‰å¤šä¸ªç‰ˆæœ¬ï¼ˆå¦‚é€‚ç”¨ï¼‰
4. **ä»£ç é£æ ¼**ï¼šéµå¾ªPEP8è§„èŒƒï¼Œå˜é‡å‘½åæ¸…æ™°
5. **è¾¹ç•Œå¤„ç†**ï¼šå¤„ç†è¾¹ç•Œæƒ…å†µå’Œå¼‚å¸¸è¾“å…¥
6. **æµ‹è¯•ç”¨ä¾‹**ï¼šæä¾›å…¸å‹æµ‹è¯•ç”¨ä¾‹

# æ ¼å¼
```markdown
## ğŸ’» å®ç°æ€è·¯
{ç”¨ä¼ªä»£ç æˆ–æµç¨‹å›¾æè¿°å®ç°æ€è·¯}

## ğŸ“ å®Œæ•´ä»£ç 

```python
def {function_name}({params}):
    """
    {ç®—æ³•åç§°}

    Args:
        {å‚æ•°è¯´æ˜}

    Returns:
        {è¿”å›å€¼è¯´æ˜}

    Example:
        >>> {example}
    """
    # å®ç°ä»£ç 
    ...
```

## ğŸ” ä»£ç è¯¦è§£
{é€è¡Œè§£é‡Šå…³é”®ä»£ç }

## ğŸ“‹ ä»£ç ä¼˜åŒ–
{è®¨è®ºå¯èƒ½çš„ä¼˜åŒ–æ–¹å‘}

## ğŸ§ª æµ‹è¯•ç”¨ä¾‹
```python
# æµ‹è¯•ä»£ç 
```

## âš ï¸ å¸¸è§é”™è¯¯
{åˆ—å‡ºå®ç°ä¸­å®¹æ˜“çŠ¯çš„é”™è¯¯}
```

# å‚è€ƒä¿¡æ¯
- çŸ¥è¯†ç‚¹ï¼š{topic_id}
- æè¿°ï¼š{description}
- ä»£ç ç‰‡æ®µï¼ˆä»èµ„æºæå–ï¼‰ï¼š{code_snippets}
"""

    # L4 å®æˆ˜åˆ†æ - Promptæ¨¡æ¿
    L4_PRACTICE = """ä½ æ˜¯ä¸€ä½ç®—æ³•ç«èµ›æ•™ç»ƒï¼Œç†Ÿæ‚‰å„ç§ç®—æ³•åœ¨å®é™…é—®é¢˜ä¸­çš„åº”ç”¨ã€‚

# ä»»åŠ¡
ä¸ºç®—æ³•çŸ¥è¯†ç‚¹"{topic_id}"ç¼–å†™L4å±‚çº§çš„"å®æˆ˜åˆ†æ"å†…å®¹ã€‚

# è¦æ±‚
1. **ç»å…¸ä¾‹é¢˜**ï¼šæä¾›2-3é“ç»å…¸ä¾‹é¢˜ï¼ŒåŒ…å«LeetCodeã€Codeforcesç­‰æ¥æº
2. **é¢˜ç›®åˆ†æ**ï¼šè¯¦ç»†åˆ†æé¢˜ç›®æ€è·¯ï¼Œå¦‚ä½•æƒ³åˆ°ç”¨è¯¥ç®—æ³•
3. **å®Œæ•´é¢˜è§£**ï¼šæä¾›å®Œæ•´çš„è§£é¢˜ä»£ç 
4. **å˜ä½“æ€»ç»“**ï¼šæ€»ç»“å¸¸è§çš„é¢˜ç›®å˜ä½“å’Œåº”å¯¹æŠ€å·§
5. **ä¸¾ä¸€åä¸‰**ï¼šå¼•å¯¼è¯»è€…æ€è€ƒç›¸å…³é—®é¢˜

# æ ¼å¼
```markdown
## ğŸ¯ ä¾‹é¢˜1ï¼š{é¢˜ç›®æ ‡é¢˜}
**æ¥æº**ï¼š{LeetCode / Codeforces / å…¶ä»–}

### é¢˜ç›®æè¿°
{é¢˜ç›®æè¿°}

### è§£é¢˜æ€è·¯
{å¦‚ä½•æƒ³åˆ°ç”¨è¯¥ç®—æ³•}

### å®Œæ•´é¢˜è§£
```python
def solution():
    ...
```

### å¤æ‚åº¦åˆ†æ
- æ—¶é—´å¤æ‚åº¦ï¼šO(?)
- ç©ºé—´å¤æ‚åº¦ï¼šO(?)

## ğŸ”„ é¢˜ç›®å˜ä½“
{åˆ—å‡ºç›¸å…³å˜ä½“}

## ğŸ’¡ è§£é¢˜æŠ€å·§æ€»ç»“
{æ€»ç»“è¯¥ç±»é¢˜ç›®çš„é€šç”¨æŠ€å·§}
```

# å‚è€ƒä¿¡æ¯
- çŸ¥è¯†ç‚¹ï¼š{topic_id}
- æè¿°ï¼š{description}
- ç›¸å…³é¢˜ç›®ï¼š{related_problems}
"""

    # ç¬”è®°è´¨é‡è¯„ä¼° - Promptæ¨¡æ¿
    QUALITY_EVALUATION = """ä½ æ˜¯ä¸€ä½å†…å®¹è´¨é‡ä¸“å®¶ï¼Œè´Ÿè´£è¯„ä¼°ç®—æ³•å­¦ä¹ ç¬”è®°çš„è´¨é‡ã€‚

# ä»»åŠ¡
å¯¹çŸ¥è¯†ç‚¹"{topic_id}"çš„ç”Ÿæˆç¬”è®°è¿›è¡Œè´¨é‡è¯„ä¼°ã€‚

# è¯„ä¼°ç»´åº¦ï¼ˆæ¯ç»´åº¦0-10åˆ†ï¼‰
1. **å‡†ç¡®æ€§**ï¼šå†…å®¹æ˜¯å¦å‡†ç¡®æ— è¯¯ï¼Œæ— æ¦‚å¿µæ€§é”™è¯¯
2. **å®Œæ•´æ€§**ï¼šæ˜¯å¦è¦†ç›–äº†çŸ¥è¯†ç‚¹çš„æ ¸å¿ƒå†…å®¹
3. **æ˜“æ‡‚æ€§**ï¼šæ˜¯å¦é€‚åˆç›®æ ‡éš¾åº¦ç­‰çº§çš„è¯»è€…ç†è§£
4. **å®ç”¨æ€§**ï¼šæ˜¯å¦æä¾›äº†å®é™…å¯ç”¨çš„ä»£ç å’Œè§£é¢˜æŠ€å·§
5. **è§„èŒƒæ€§**ï¼šæ ¼å¼ã€æœ¯è¯­ã€ç¬¦å·æ˜¯å¦è§„èŒƒ

# è¾“å‡ºæ ¼å¼
```json
{{
  "total_score": 85,
  "dimensions": {{
    "accuracy": 9,
    "completeness": 8,
    "readability": 9,
    "practicality": 8,
    "standardization": 9
  }},
  "strengths": ["L1ç±»æ¯”ç”ŸåŠ¨å½¢è±¡", "ä»£ç æ³¨é‡Šè¯¦ç»†"],
  "weaknesses": ["ç¼ºå°‘å¤æ‚åº¦è¯æ˜", "ä¾‹é¢˜ä¸å¤Ÿå…¸å‹"],
  "suggestions": ["è¡¥å……æ•°å­¦è¯æ˜", "å¢åŠ æ›´å¤šä¾‹é¢˜"]
}}
```

# å¾…è¯„ä¼°å†…å®¹
## L1 ç›´è§‚å¼•å…¥
{l1_content}

## L2 æ ¸å¿ƒåŸç†
{l2_content}

## L3 ä»£ç å®ç°
{l3_content}

## L4 å®æˆ˜åˆ†æ
{l4_content}
"""

    @staticmethod
    def format_l1_prompt(topic_id: str, description: str, difficulty: int,
                         related_topics: List[str], resource_summary: str) -> str:
        """æ ¼å¼åŒ–L1 Prompt"""
        related = ", ".join(related_topics) if related_topics else "æ— "
        return NotePrompts.L1_INTRODUCTION.format(
            topic_id=topic_id,
            description=description,
            difficulty=difficulty,
            related_topics=related,
            resource_summary=resource_summary
        )

    @staticmethod
    def format_l2_prompt(topic_id: str, description: str, difficulty: int,
                         prerequisites: List[str], related_topics: List[str]) -> str:
        """æ ¼å¼åŒ–L2 Prompt"""
        prereqs = ", ".join(prerequisites) if prerequisites else "æ— "
        related = ", ".join(related_topics) if related_topics else "æ— "
        return NotePrompts.L2_PRINCIPLE.format(
            topic_id=topic_id,
            description=description,
            difficulty=difficulty,
            prerequisites=prereqs,
            related_topics=related
        )

    @staticmethod
    def format_l3_prompt(topic_id: str, description: str, code_snippets: str) -> str:
        """æ ¼å¼åŒ–L3 Prompt"""
        return NotePrompts.L3_IMPLEMENTATION.format(
            topic_id=topic_id,
            description=description,
            code_snippets=code_snippets or "ä»èµ„æºä¸­æå–"
        )

    @staticmethod
    def format_l4_prompt(topic_id: str, description: str, related_problems: List[str]) -> str:
        """æ ¼å¼åŒ–L4 Prompt"""
        problems = "\n".join([f"- {p}" for p in related_problems]) if related_problems else "- å¾…è¡¥å……"
        return NotePrompts.L4_PRACTICE.format(
            topic_id=topic_id,
            description=description,
            related_problems=problems
        )

    @staticmethod
    def format_quality_prompt(topic_id: str, l1_content: str, l2_content: str,
                            l3_content: str, l4_content: str) -> str:
        """æ ¼å¼åŒ–è´¨é‡è¯„ä¼°Prompt"""
        return NotePrompts.QUALITY_EVALUATION.format(
            topic_id=topic_id,
            l1_content=l1_content or "[æœªç”Ÿæˆ]",
            l2_content=l2_content or "[æœªç”Ÿæˆ]",
            l3_content=l3_content or "[æœªç”Ÿæˆ]",
            l4_content=l4_content or "[æœªç”Ÿæˆ]"
        )
